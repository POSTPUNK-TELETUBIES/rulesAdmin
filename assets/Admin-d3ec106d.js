import{j as e,ag as Ie,ah as Me,a8 as De,ai as Pe,af as Te,aj as Le,ak as ee,al as Ae,am as Fe,an as Re,ao as Ee,ap as Oe}from"./@mui/icons-material-21caf791.js";import{r as c,e as qe,d as $,g as te}from"./vendor-207237f2.js";import{f as ne,s as He,v as Ne,D as ze,b as se,c as K,d as Be,e as Ye,g as $e,h as I,C as U,i as Qe,j as Ve,k as We,p as Ge,l as Ke,m as Ue,n as Je,S as Xe,o as Ze,q as J}from"./index-0b6f5c0d.js";import{u as et}from"./@reactour/tour-6e99e852.js";import{u as ae}from"./@tanstack/react-query-b125ade5.js";import{F as L,I as A,x as F,M as j,y as tt,r as re,h as T,i as y,S as g,q as ie,B as p,z as nt,E as le,H as X,J as P,K as st,s as at,N as S,Q as rt,L as oe,e as ce,R as it,o as lt}from"./@mui/material-9558fc6b.js";import{z as R,s as E,b as x,C as k,E as Q,H as ot,J as ct,M as dt,N as ut,O as ht,Q as xt,R as ft,S as gt,U as mt,x as pt}from"./@mui/lab-a904190e.js";import{c as de}from"./react-auth-kit-6f8283cb.js";import{d as jt,a as b}from"./dayjs-f30b717c.js";import{c as vt,o as yt}from"./use-debounce-ff8cde72.js";import{D as Ct}from"./react-draggable-6de9b79d.js";import{u as bt}from"./react-hook-form-51a9c024.js";import"./@emotion/react-23f5b1b9.js";import"./@emotion/styled-94d978bf.js";import"./notistack-7f28b1fa.js";import"./@supabase/supabase-js-e8fae348.js";import"./@supabase/postgrest-js-d220d860.js";import"./react-router-dom-e9e8f079.js";import"./dexie-911c5dc6.js";import"./dexie-react-hooks-efe53238.js";import"./axios-4a70c6fc.js";import"./papaparse-6ea79c53.js";import"./@react-rxjs/utils-31d3d490.js";import"./@react-rxjs/core-8fefe617.js";import"./react-lazy-load-image-component-3f9d37e3.js";import"./hotkeys-js-46483ca1.js";var ue=(t=>(t.Blocker="BLOCKER",t.Critical="CRITICAL",t.Info="INFO",t.Major="MAJOR",t.Minor="MINOR",t))(ue||{}),he=(t=>(t.Bug="BUG",t.CodeSmell="CODE_SMELL",t.SecurityHotspot="SECURITY_HOTSPOT",t.Vulnerability="VULNERABILITY",t))(he||{});const _t=()=>{const{data:t,isLoading:n}=ae({queryKey:["languages"],queryFn:()=>ne.getAllLanguages()});return{data:t,isLoading:n}},xe=t=>{const{data:n,isFetching:s}=ae({queryKey:["qualityprofile",t],queryFn:()=>ne.getQualityProfilesByLanguage(t),enabled:!!t});return{data:n,isFetching:s}},fe=({className:t,handleChange:n,inputProps:s,includeAllOption:a,displayEmpty:l})=>{const{data:i,isLoading:r}=_t();return e.jsx(L,{sx:{width:200},className:t,children:r?e.jsx(R,{}):e.jsxs(e.Fragment,{children:[e.jsx(A,{id:"language",children:"Lenguaje"}),e.jsxs(F,{inputProps:s,labelId:"language",label:"Lenguaje",onChange:n,sx:{width:200},defaultValue:a?"all":"",displayEmpty:l,children:[a&&e.jsx(j,{value:"all",children:"Todos"}),i==null?void 0:i.map(({id:u,name:h})=>e.jsx(j,{value:u,children:h},u))]})]})})},St=()=>{const{setIsOpen:t,isOpen:n}=et(),s=c.useCallback(a=>{He(a.target.value)},[]);return c.useEffect(()=>{const a=Ne();t(a)},[t]),c.useEffect(()=>{ze("body",n==null?void 0:n.valueOf())},[n]),e.jsx(fe,{className:"language",handleChange:s,displayEmpty:!0})},kt=()=>{const t=se(),n=c.useRef(null),{data:s,isFetching:a}=xe(t);c.useEffect(()=>{var i;K(((i=n.current)==null?void 0:i.value)??"")},[t]);const l=c.useCallback(i=>{K(i.target.value)},[]);return a?e.jsx(R,{}):e.jsxs(L,{className:"mainFilters",sx:{width:200},children:[e.jsx(A,{id:"qualityprofile",children:"Quality Profile"}),e.jsx(F,{ref:n,onChange:l,label:"Quality Profile",labelId:"qualityprofile",defaultValue:"",displayEmpty:!0,children:s==null?void 0:s.map(({id:i,name:r})=>e.jsx(j,{value:i,children:r},i))})]})},wt=({value:t,label:n,reactiveCb:s})=>{const a=c.useCallback(()=>{s(t)},[s,t]);return e.jsx(j,{onClick:a,children:n})},V=({filterConfig:t,reactiveCallback:n,isClosingRecursive:s})=>{const[a,l]=c.useState(null),[i,r]=c.useState(!0),u=c.useCallback(o=>{n(o),r(o==="all"),s&&l(null)},[s,n]),h=c.useCallback(()=>{l(null)},[]),d=c.useCallback(o=>{o.preventDefault(),l(o.currentTarget)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(E,{onClick:d,sx:{padding:"1px !important"},children:e.jsx(tt,{variant:"dot",invisible:i,color:"secondary",children:e.jsx(Ie,{sx:{color:"#e4a010"}})})}),e.jsx(re,{anchorEl:a,onClose:h,open:!!a,children:t.map(({value:o,label:f})=>e.jsx(wt,{label:f,value:o,reactiveCb:u},o))})]})},ge=[{value:"all",label:"Todos"},...Object.values(he).map(t=>({value:t,label:t}))],me=[{value:"all",label:"Todos"},...Object.values(ue).map(t=>({value:t,label:t}))],pe=[{value:"all",label:"Todos"},{value:"active",label:"Activo"},{value:"deactive",label:"Inactivo"}],It=Object.freeze({all:null,active:!0,deactive:!1}),Mt=()=>{const t=c.useCallback(n=>{Be(It[n])},[]);return e.jsx(V,{filterConfig:pe,isClosingRecursive:!0,reactiveCallback:t})},Dt=()=>{const t=c.useCallback(n=>{Ye(n)},[]);return e.jsx(V,{filterConfig:me,isClosingRecursive:!0,reactiveCallback:t})},Pt=()=>{const t=c.useCallback(n=>$e(n),[]);return e.jsx(V,{filterConfig:ge,isClosingRecursive:!0,reactiveCallback:t})},w=[{label:"",especialConfig:!0,resource:"htmlDesc"},{label:"Código",resource:"key",textAlign:"left"},{label:"Regla",resource:"name",textAlign:"left"},{label:"Tipo",resource:"type",filter:e.jsx(Pt,{}),textAlign:"left"},{label:"Severidad",resource:"severity",textAlign:"left",filter:e.jsx(Dt,{})},{label:"E. Actual",resource:"isActiveSonar",especialConfig:!0,className:"actualState",textAlign:"left",filter:e.jsx(Mt,{}),sxProps:{minWidth:100}},{label:"E. Propuesto",resource:"isActive",especialConfig:!0,className:"proposedState",sxProps:{minWidth:100}},{label:"Propuesta",resource:"updated_at",especialConfig:!0,icon:e.jsx(Me,{sx:{color:t=>t.palette.common.white}})},{label:"Autor",resource:"user_email",sxProps:{width:150}}],Tt=c.memo(({data:t})=>e.jsx(e.Fragment,{children:e.jsx(T,{children:t.map(({label:n,icon:s,filter:a,className:l,sxProps:i})=>e.jsx(y,{variant:"head",className:l,sx:{background:r=>`${r.palette.grey[900]} !important`,...i},children:e.jsxs(g,{direction:"row",gap:.5,alignItems:"center",justifyContent:"space-between",children:[e.jsx(x,{sx:{color:r=>r.palette.common.white},fontWeight:700,children:n}),s,a]})},n))})}));function Lt({initialStatus:t,result:n,id:s}){const[a,l]=c.useState(!1),[i,r]=c.useState(t),u=de();c.useEffect(()=>{r(t)},[t]),c.useEffect(()=>{I.rulesStatus.get(Number(s)).then(o=>l(!!o))},[s]);const h=n.isActiveOriginal!==i;c.useEffect(()=>{a&&n.isActiveOriginal===i&&I.rulesStatus.delete(Number(s))},[i,s,a,n.isActiveOriginal]);const d=c.useCallback(async o=>{var m;r(o.target.checked);const f=await I.rulesStatus.get(Number(s));(!a||n.isActiveOriginal!==o.target.checked)&&await I.rulesStatus.put({...f,id:Number(s),newStatus:o.target.checked,updated_at:new Date,languageId:n.lang_id,qualityProfileId:Number(n.qualityProfile_id),user_email:(m=u().user)==null?void 0:m.email}),l(!0)},[s,a,n.isActiveOriginal,n.lang_id,n.qualityProfile_id]);return e.jsxs(g,{direction:"row",alignItems:"center",children:[e.jsx(x,{minWidth:60,children:i?"Activo":"Inactivo"}),e.jsx(ie,{onChange:d,checked:i}),a&&h?e.jsx(De,{}):""]})}function At(t){const{tags:n,isActive:s,dateSonar:a,ruleTitle:l,ruleDescription:i}=t;return e.jsxs(p,{children:[e.jsxs(g,{padding:2,direction:"column",spacing:2,children:[e.jsxs(g,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[e.jsx(k,{sx:{backgroundColor:({palette:r})=>r.mode===U.DARK?r.grey[900]:r.grey[800],color:"white"},label:`Regla ${s?"activo":"inactivo"} desde:`}),e.jsx(k,{label:`${a??"Sin info"}`})]}),e.jsx(g,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:n.map(r=>e.jsx(k,{label:r},r))})]}),e.jsx(g,{direction:"row",justifyContent:"flex-start",alignItems:"center",padding:2,pb:0,children:e.jsx(Q,{title:l,children:e.jsx(k,{color:"secondary",label:e.jsx(x,{noWrap:!0,variant:"h5",children:l})})})}),e.jsxs(g,{direction:"column",justifyContent:"center",padding:2,children:[e.jsx(g,{direction:"row",justifyContent:"flex-start",children:e.jsx(k,{label:"Descripción de la Regla",sx:{backgroundColor:({palette:r})=>r.mode===U.DARK?r.grey[900]:r.grey[800],color:"white"}})}),e.jsx(x,{dangerouslySetInnerHTML:{__html:i}})]})]})}var W={},je={exports:{}};(function(t){function n(s){return s&&s.__esModule?s:{default:s}}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(je);var ve=je.exports,Y={};const Ft=qe(Pe);var Z;function ye(){return Z||(Z=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=Ft}(Y)),Y}var Rt=ve;Object.defineProperty(W,"__esModule",{value:!0});var Ce=W.default=void 0,Et=Rt(ye()),Ot=e,qt=(0,Et.default)((0,Ot.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),"History");Ce=W.default=qt;function Ht({comments:t}){return e.jsx(ot,{sx:{[`& .${ct.root}:before`]:{flex:0,padding:0}},children:t.map(n=>e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{color:"primary",children:e.jsx(Ce,{})}),e.jsx(xt,{})]}),e.jsx(ft,{children:e.jsxs(p,{sx:{textAlign:"left"},children:[e.jsx(x,{variant:"subtitle2",sx:{fontSize:"1rem",fontWeight:"bold",color:"black"},children:n.timestamp}),e.jsx(x,{variant:"body1",children:n.author}),e.jsx(x,{variant:"body1",children:n.content})]})})]},n.id))})}var G={},Nt=ve;Object.defineProperty(G,"__esModule",{value:!0});var be=G.default=void 0,zt=Nt(ye()),Bt=e,Yt=(0,zt.default)((0,Bt.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");be=G.default=Yt;const _e=({title:t,result:n})=>{const s=de(),a=vt(async({target:i})=>{var r;return await I.saveDescription({...n,user_email:(r=s().user)==null?void 0:r.email},i.value)},500),l=()=>{};return e.jsxs(e.Fragment,{children:[e.jsx(x,{sx:{fontStyle:"italic",fontWeight:900},children:"Sustento de la propuesta"}),e.jsx(nt,{multiline:!0,fullWidth:!0,defaultValue:n.description,title:t,placeholder:"Esta regla aún no ha tenido observaciones",onChange:a}),e.jsx(Q,{title:"Editar propuesta",children:e.jsx(E,{onClick:l,sx:{background:({palette:i})=>i.primary.light,zIndex:500},children:e.jsx(be,{})})})]})},$t=[{tab:"description",content:({result:t})=>e.jsx(At,{tags:[t.severity,t.type],isActive:t.isActive,ruleTitle:t.name,ruleDescription:t.htmlDesc})},{tab:"history",content:()=>{const t=Qe(8);return e.jsxs(p,{height:"100%",display:"flex",flexDirection:"column",children:[e.jsx(p,{flexGrow:1,overflow:"auto",flexBasis:"75%",children:e.jsx(Ht,{comments:t})}),e.jsx(P,{}),e.jsx(p,{height:"30%",overflow:"auto",p:2,children:e.jsx(g,{direction:"row",pr:2,children:e.jsx(_e,{result:{id:"1",created_at:new Date,isActive:!0,isActiveSonar:!1,qualityProfile_id:"profile-id",rule_id:"rule-id",updated_at:new Date,key:"rule-key",lang_id:"language-id",name:"rule-name",user_email:"user@example.com"},title:"Sustento de la propuesta"})})})]})}}],Qt=({isDrawerOpen:t,setIsDrawerOpen:n,result:s})=>{const[a,l]=c.useState("");c.useEffect(()=>{t||l("")},[t]);const i=d=>{d.stopPropagation(),n(!t),a==="description"&&l("")},r=(d,o)=>{l(o)},u=d=>{d.stopPropagation()},h=$t.find(d=>d.tab===a);return e.jsxs(le,{anchor:"right",open:t,onClose:i,onClick:u,PaperProps:{style:{width:"42.5%"}},children:[e.jsxs(gt,{value:a,onChange:r,variant:"fullWidth","aria-label":"Drawer tabs",children:[e.jsx(X,{label:"Descripción de Reglas",value:"description"}),e.jsx(X,{label:"Historial de Cambios",value:"history"})]}),h&&h.content({result:s})]})};var Se={exports:{}};(function(t,n){(function(s,a){t.exports=a()})($,function(){return function(s,a,l){l.updateLocale=function(i,r){var u=l.Ls[i];if(u)return(r?Object.keys(r):[]).forEach(function(h){u[h]=r[h]}),u}}})})(Se);var Vt=Se.exports;const Wt=te(Vt);var ke={exports:{}};(function(t,n){(function(s,a){t.exports=a()})($,function(){return function(s,a,l){s=s||{};var i=a.prototype,r={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(d,o,f,m){return i.fromToBase(d,o,f,m)}l.en.relativeTime=r,i.fromToBase=function(d,o,f,m,M){for(var O,D,q,H=f.$locale().relativeTime||r,N=s.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],we=N.length,_=0;_<we;_+=1){var v=N[_];v.d&&(O=m?l(d).diff(f,v.d,!0):f.diff(d,v.d,!0));var C=(s.rounding||Math.round)(Math.abs(O));if(q=O>0,C<=v.r||!v.r){C<=1&&_>0&&(v=N[_-1]);var z=H[v.l];M&&(C=M(""+C)),D=typeof z=="string"?z.replace("%d",C):z(C,o,v.l,q);break}}if(o)return D;var B=q?H.future:H.past;return typeof B=="function"?B(D):B.replace("%s",D)},i.to=function(d,o){return u(d,o,this,!0)},i.from=function(d,o){return u(d,o,this)};var h=function(d){return d.$u?l.utc():l()};i.toNow=function(d){return this.to(h(this),d)},i.fromNow=function(d){return this.from(h(this),d)}}})})(ke);var Gt=ke.exports;const Kt=te(Gt);var Ut={exports:{}};(function(t,n){(function(s,a){t.exports=a(jt)})($,function(s){function a(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var l=a(s),i={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(r){return r+"º"}};return l.default.locale(i,null,!0),i})})(Ut);b.extend(Wt);b.locale("es");b.extend(Kt);b.updateLocale("es",{relativeTime:{future:"en %s",past:"hace %s",s:"1 s",m:"1 min",mm:"%d min",h:"1 h",hh:"%d h",d:"1 d",dd:"%d d",M:"1 M",MM:"%d M",y:"1 Y",yy:"%d Y"}});const Jt=t=>b(t).from(new Date),Xt=({resource:t,value:n,result:s,secondaryValue:a})=>{const[l,i]=c.useState(!1),r=()=>{i(!l)};return t==="isActiveSonar"?e.jsx(x,{children:n?"Activo":"Inactivo"}):t==="htmlDesc"?e.jsxs(e.Fragment,{children:[e.jsx(E,{onClick:r,children:e.jsx(Te,{})}),e.jsx(Qt,{isDrawerOpen:l,setIsDrawerOpen:i,result:s})]}):t==="updated_at"?Math.abs(b(String(n)).diff(a,"hours"))>6?e.jsx(x,{align:"left",children:Jt(String(n))}):e.jsx(x,{align:"left",children:"--"}):e.jsx(Lt,{initialStatus:!!n,result:s,id:s.id})},Zt=({colSpan:t})=>e.jsx(y,{colSpan:t,children:e.jsx(p,{display:"grid",sx:{placeContent:"center",minHeight:400},children:e.jsx(R,{})})}),en=({icon:t,primaryText:n,secondaryText:s})=>e.jsxs(g,{direction:"column",justifyContent:"center",alignItems:"center",minHeight:"50vh",sx:{fontSize:100},gap:8,children:[t,e.jsxs(g,{direction:"column",gap:4,children:[e.jsx(x,{color:"GrayText",variant:"h3",children:n}),s&&e.jsx(x,{textAlign:"center",color:"GrayText",variant:"body1",children:s})]})]}),tn=({hasContent:t,children:n,colSpan:s})=>t?e.jsx(e.Fragment,{children:n}):e.jsx(T,{children:e.jsx(y,{colSpan:s,children:e.jsx(en,{icon:e.jsx(Le,{color:"disabled",fontSize:"inherit"}),primaryText:"Sin datos",secondaryText:"Selecciona filtros"})})}),nn=({children:t,collapseContent:n,colSpan:s})=>{const[a,l]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(T,{sx:{cursor:"pointer",":hover":{backgroundColor:({palette:i})=>i.grey[400]}},onClick:()=>{l(i=>!i)},children:t}),e.jsxs(T,{children:[e.jsx(y,{padding:a?"normal":"none",colSpan:2}),e.jsx(y,{colSpan:s,padding:a?"normal":"none",children:e.jsx(mt,{in:a,children:n})})]})]})};function sn(){const[t,n,{data:s,isFetching:a,total:l,page:i,rowsPerPage:r}]=Ve(),u=c.useCallback((d,o)=>{d&&t(o+1)},[t]),h=c.useCallback(d=>{n(parseInt(d.target.value,10)),t(1)},[t,n]);return e.jsxs(e.Fragment,{children:[e.jsx(We,{body:a?e.jsx(Zt,{colSpan:w.length}):e.jsx(tn,{hasContent:!!(s!=null&&s.length),colSpan:w.length,children:a?[]:s==null?void 0:s.map(d=>e.jsx(nn,{colSpan:w.length-2,collapseContent:e.jsx(g,{direction:"row",pr:2,children:e.jsx(_e,{result:d,title:`${d.id}-comments`})}),children:w.map(({resource:o,especialConfig:f,textAlign:m})=>f?e.jsx(y,{sx:{textAlign:m??"center"},children:e.jsx(Xt,{result:d,resource:o,secondaryValue:d.created_at,value:d[o]??"--"})},o+d.id):e.jsx(y,{sx:{textAlign:m??"center",maxWidth:140},children:e.jsx(Q,{title:String(d[o]??"--"),children:e.jsx(x,{noWrap:!0,sx:{...o==="key"?{width:60}:{}},children:Ge(String(d[o]??"--"),o==="key")})})},o+d.id))},d.id))}),header:e.jsx(Tt,{data:w})}),e.jsx(p,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(st,{rowsPerPage:r,count:l??1e3,page:i-1,onPageChange:u,onRowsPerPageChange:h,labelRowsPerPage:"Filas por página"})})]})}const an=({content:t})=>e.jsx("div",{style:{position:"sticky",bottom:20,left:"90vw",width:40,display:"flex",justifyContent:"flex-end",zIndex:500},children:t}),rn=({label:t,labelId:n,inputProps:s,config:a})=>e.jsx(F,{labelId:n,label:t,sx:{width:200},defaultValue:"all",displayEmpty:!0,inputProps:s,children:a==null?void 0:a.map(({value:l,label:i})=>e.jsx(j,{value:l,children:i},i))}),ln=[{id:"type-uncontrolled",label:"Type",registerField:"type",config:ge},{id:"severity-uncontrolled",label:"Severity",registerField:"severity",config:me},{id:"state-uncontrolled",label:"State",registerField:"state",config:pe}],on=({handleChanges:t,text:n,inputProps:s,includeAllOptions:a})=>{const{data:l,isFetching:i}=xe(n==="all"?"":n);if(i)return e.jsx(R,{});const[r]=l??[];return e.jsxs(L,{sx:{width:200},children:[e.jsx(A,{id:"qualityProfile-uncontrolled",children:"Quality Profile"}),e.jsxs(F,{inputProps:s,onChange:t,label:"Quality Profile",labelId:"qualityProfile-uncontrolled",defaultValue:a?"all":r==null?void 0:r.id,children:[a&&e.jsx(j,{value:"all",children:"Todos"}),l==null?void 0:l.map(({id:u,name:h})=>e.jsx(j,{value:u,children:h},u))]})]})},cn=({handleClose:t,isOpen:n})=>{const{register:s,handleSubmit:a}=bt(),[l,i]=c.useState(),[r,u]=c.useState(!0),h=c.useCallback(async o=>await Ke().downloadReport({lang_id:o.language_id,qualityProfile_id:o.qualityProfile_id,severity:o.severity,type:o.type,isActiveSonar:o.state},o.showOnlyIsActiveDifferences),[]),d=c.useCallback(o=>{i(o.target.value)},[]);return e.jsx(le,{variant:"persistent",onClose:t,anchor:"right",open:n,children:e.jsx(g,{sx:{minWidth:400},component:"form",onSubmit:a(h),children:e.jsxs(at,{children:[e.jsx(S,{children:e.jsx(rt,{control:e.jsx(ie,{...s("showOnlyIsActiveDifferences"),checked:!r,onChange:o=>u(!o.target.checked)}),label:"Solo estados propuestos"})}),e.jsx(P,{}),e.jsx(S,{children:e.jsx(fe,{includeAllOption:r,inputProps:s("language_id"),className:"generic-filter-uncontrolled",handleChange:d})}),e.jsx(S,{children:e.jsx(on,{includeAllOptions:r,text:l,inputProps:s("qualityProfile_id")})}),r&&e.jsxs(e.Fragment,{children:[e.jsx(P,{}),ln.map(({id:o,label:f,registerField:m,config:M})=>e.jsx(S,{children:e.jsxs(L,{sx:{width:200},children:[e.jsx(A,{id:o,children:f}),e.jsx(rn,{config:M,label:f,labelId:o,inputProps:s(m)})]})},o+f))]}),e.jsx(P,{}),e.jsx(S,{children:e.jsx(pt,{type:"submit",variant:"contained",startIcon:e.jsx(ee,{}),sx:{width:"100%"},children:"Descargar"})})]})})})},dn=()=>{const[t,n]=c.useState(!1),s=c.useCallback(()=>{n(!0)},[]),a=c.useCallback(()=>{n(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(j,{onClick:s,children:[e.jsx(oe,{children:e.jsx(ee,{})}),e.jsx(ce,{children:"Descarga Personalizada"})]}),e.jsx(cn,{handleClose:a,isOpen:t})]})},un=()=>{const[t]=Ue();return e.jsxs(j,{onClick:t,children:[e.jsx(oe,{children:e.jsx(Ae,{fontSize:"small"})}),e.jsx(ce,{children:"Restaurar"})]})},hn=()=>{const[t,n]=c.useState(null),s=c.useRef(null),a=Je(),l=c.useCallback(()=>{n(null)},[]);c.useEffect(()=>{n(a?s.current:null)},[a]);const i=c.useCallback(({currentTarget:r})=>{n(r)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(Ct,{children:e.jsx(E,{ref:s,onClick:i,sx:{background:({palette:r})=>r.secondary.main,zIndex:500},className:"dragableMenu",children:e.jsx(Fe,{fontSize:"large"})})}),e.jsxs(re,{className:"menuDragable",anchorEl:t,open:!!t,onClose:l,children:[e.jsx(Xe,{}),e.jsx(dn,{}),e.jsx(un,{})]})]})},xn=()=>{const t=se(),n=Ze(),[s,a]=c.useState(),[l]=yt(s,1e3),i=c.useMemo(()=>t&&n,[t,n]),r=c.useCallback(({target:u})=>{a(u.value)},[]);return c.useEffect(()=>{a(""),J()},[t,n]),c.useEffect(()=>{J(l)},[l]),e.jsx(it,{value:s,disabled:!i,onChange:r,startAdornment:e.jsx(Re,{})})};function Nn(){return e.jsxs(lt,{children:[e.jsxs(p,{display:"flex",flexDirection:"column",gap:2,pt:6,pb:2,children:[e.jsxs(p,{display:"flex",gap:1.5,children:[e.jsx(Ee,{}),e.jsx(x,{fontSize:{xs:"16px",md:"17px"},children:"Activa o desactiva los switches dependiendo si deseas habilitar la regla o no"})]}),e.jsxs(p,{display:"flex",gap:1.5,children:[e.jsx(Oe,{}),e.jsx(x,{fontSize:{xs:"16px",md:"17px"},children:"Recuerda que los estados que propongas no se aplicarán de inmediato en SonarQube"})]})]}),e.jsx(g,{direction:"column",gap:4,marginTop:4,children:e.jsxs(p,{display:"flex",gap:4,children:[e.jsx(St,{}),e.jsx(kt,{}),e.jsx(xn,{})]})}),e.jsx(sn,{}),e.jsx(an,{content:e.jsx(hn,{})})]})}export{Nn as default};
