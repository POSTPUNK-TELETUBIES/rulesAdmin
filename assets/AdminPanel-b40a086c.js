import{j as e,af as we,ag as Ie,a6 as Me,ah as Pe,ad as Te,ai as De,aj as ae,ak as Le,al as Ae,am as Fe,an as Re,ao as Ee}from"./@mui/icons-material-b88151fa.js";import{r as c,d as G,e as Oe}from"./vendor-b612640b.js";import{f as re,s as qe,v as Be,D as He,u as ie,a as X,b as Ne,c as Ye,d as ze,A as le,e as M,C as Z,g as $e,h as Qe,i as Ve,p as We,j as Ge,k as Ke,l as Ue,S as Je,m as Xe,n as ee}from"./index-fdb553ea.js";import{u as Ze}from"./@reactour/tour-e24be7d6.js";import{u as oe}from"./@tanstack/react-query-7cfe65c4.js";import{F as A,I as F,x as R,M as m,y as et,r as ce,h as D,i as y,S as g,q as de,B as j,z as ue,E as te,G as T,H as tt,J as nt,s as st,K as k,N as at,L as he,e as xe,Q as rt}from"./@mui/material-73341fda.js";import{D as E,s as O,b as f,C as w,E as Q,H as it,J as lt,M as ot,N as ct,O as dt,Q as ut,R as ht,U as xt,V as ft,x as gt}from"./@mui/lab-d8569c0b.js";import{c as mt,o as pt}from"./use-debounce-6bf2a1da.js";import{d as jt,a as _}from"./dayjs-c0cd33fe.js";import{c as vt}from"./react-draggable-25144dc2.js";import{u as Ct}from"./react-hook-form-c6612ec3.js";import"./@emotion/react-0d101b94.js";import"./@emotion/styled-6b07d811.js";import"./@supabase/supabase-js-711ba96a.js";import"./dexie-3976de5d.js";import"./dexie-react-hooks-0c2ddb12.js";import"./axios-760d4776.js";import"./papaparse-e84842e1.js";import"./@react-rxjs/utils-24ca515a.js";import"./@react-rxjs/core-1a0bb4f0.js";import"./notistack-f20782e6.js";import"./hotkeys-js-d20e5801.js";const yt=()=>{const{data:t,isLoading:n}=oe({queryKey:["languages"],queryFn:()=>re.getAllLanguages()});return{data:t,isLoading:n}},fe=t=>{const{data:n,isFetching:s}=oe({queryKey:["qualityprofile",t],queryFn:()=>re.getQualityProfilesByLanguage(t),enabled:!!t});return{data:n,isFetching:s}},ge=({className:t,handleChange:n,inputProps:s,includeAllOption:a,displayEmpty:o})=>{const{data:i,isLoading:r}=yt();return e.jsx(A,{sx:{width:200},className:t,children:r?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsx(F,{id:"language",children:"Lenguaje"}),e.jsxs(R,{inputProps:s,labelId:"language",label:"Lenguaje",onChange:n,sx:{width:200},defaultValue:a?"all":"",displayEmpty:o,children:[a&&e.jsx(m,{value:"all",children:"Todos"}),i==null?void 0:i.map(({id:d,name:x})=>e.jsx(m,{value:d,children:x},d))]})]})})},bt=()=>{const{setIsOpen:t,isOpen:n}=Ze(),s=c.useCallback(a=>{qe(a.target.value)},[]);return c.useEffect(()=>{const a=Be();t(a)},[t]),c.useEffect(()=>{He("body",n==null?void 0:n.valueOf())},[n]),e.jsx(ge,{className:"language",handleChange:s,displayEmpty:!0})},_t=()=>{const t=ie(),n=c.useRef(null),{data:s,isFetching:a}=fe(t);c.useEffect(()=>{var i;X(((i=n.current)==null?void 0:i.value)??"")},[t]);const o=c.useCallback(i=>{X(i.target.value)},[]);return a?e.jsx(E,{}):e.jsxs(A,{className:"mainFilters",sx:{width:200},children:[e.jsx(F,{id:"qualityprofile",children:"Quality Profile"}),e.jsx(R,{ref:n,onChange:o,label:"Quality Profile",labelId:"qualityprofile",defaultValue:"",displayEmpty:!0,children:s==null?void 0:s.map(({id:i,name:r})=>e.jsx(m,{value:i,children:r},i))})]})},St=({value:t,label:n,reactiveCb:s})=>{const a=c.useCallback(()=>{s(t)},[s,t]);return e.jsx(m,{onClick:a,children:n})},K=({filterConfig:t,reactiveCallback:n,isClosingRecursive:s})=>{const[a,o]=c.useState(null),[i,r]=c.useState(!0),d=c.useCallback(l=>{n(l),r(l==="all"),s&&o(null)},[s,n]),x=c.useCallback(()=>{o(null)},[]),u=c.useCallback(l=>{l.preventDefault(),o(l.currentTarget)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:u,sx:{padding:"1px !important"},children:e.jsx(et,{variant:"dot",invisible:i,color:"secondary",children:e.jsx(we,{sx:{color:"#e4a010"}})})}),e.jsx(ce,{anchorEl:a,onClose:x,open:!!a,children:t.map(({value:l,label:h})=>e.jsx(St,{label:h,value:l,reactiveCb:d}))})]})};var me=(t=>(t.Blocker="BLOCKER",t.Critical="CRITICAL",t.Info="INFO",t.Major="MAJOR",t.Minor="MINOR",t))(me||{}),pe=(t=>(t.Bug="BUG",t.CodeSmell="CODE_SMELL",t.SecurityHotspot="SECURITY_HOTSPOT",t.Vulnerability="VULNERABILITY",t))(pe||{});const je=[{value:"all",label:"Todos"},...Object.values(pe).map(t=>({value:t,label:t}))],ve=[{value:"all",label:"Todos"},...Object.values(me).map(t=>({value:t,label:t}))],Ce=[{value:"all",label:"Todos"},{value:"active",label:"Activo"},{value:"deactive",label:"Inactivo"}],kt=Object.freeze({all:null,active:!0,deactive:!1}),wt=()=>{const t=c.useCallback(n=>{Ne(kt[n])},[]);return e.jsx(K,{filterConfig:Ce,isClosingRecursive:!0,reactiveCallback:t})},It=()=>{const t=c.useCallback(n=>{Ye(n)},[]);return e.jsx(K,{filterConfig:ve,isClosingRecursive:!0,reactiveCallback:t})},Mt=()=>{const t=c.useCallback(n=>ze(n),[]);return e.jsx(K,{filterConfig:je,isClosingRecursive:!0,reactiveCallback:t})},I=[{label:"",especialConfig:!0,resource:"htmlDesc"},{label:"Código",resource:"key",textAlign:"left"},{label:"Regla",resource:"name",textAlign:"left"},{label:"Tipo",resource:"type",filter:e.jsx(Mt,{}),textAlign:"left"},{label:"Severidad",resource:"severity",textAlign:"left",filter:e.jsx(It,{})},{label:"E. Actual",resource:"isActiveSonar",especialConfig:!0,className:"actualState",textAlign:"left",filter:e.jsx(wt,{}),sxProps:{minWidth:100}},{label:"E. Propuesto",resource:"isActive",especialConfig:!0,className:"proposedState",sxProps:{minWidth:100}},{label:"Propuesta",resource:"updated_at",especialConfig:!0,icon:e.jsx(Ie,{sx:{color:t=>t.palette.common.white}})},{label:"Autor",resource:"user_email",sxProps:{width:150}}],Pt=c.memo(({data:t})=>e.jsx(e.Fragment,{children:e.jsx(D,{children:t.map(({label:n,icon:s,filter:a,className:o,sxProps:i})=>e.jsx(y,{variant:"head",className:o,sx:{background:r=>`${r.palette.grey[900]} !important`,...i},children:e.jsxs(g,{direction:"row",gap:.5,alignItems:"center",justifyContent:"space-between",children:[e.jsx(f,{sx:{color:r=>r.palette.common.white},fontWeight:700,children:n}),s,a]})},n))})}));var V={},Tt={get exports(){return V},set exports(t){V=t}};(function(t,n){(function(s,a){t.exports=a()})(G,function(){return function(s,a,o){o.updateLocale=function(i,r){var d=o.Ls[i];if(d)return(r?Object.keys(r):[]).forEach(function(x){d[x]=r[x]}),d}}})})(Tt);const Dt=V;var W={},Lt={get exports(){return W},set exports(t){W=t}};(function(t,n){(function(s,a){t.exports=a()})(G,function(){return function(s,a,o){s=s||{};var i=a.prototype,r={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function d(u,l,h,v){return i.fromToBase(u,l,h,v)}o.en.relativeTime=r,i.fromToBase=function(u,l,h,v,C){for(var q,P,B,H=h.$locale().relativeTime||r,N=s.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],ke=N.length,S=0;S<ke;S+=1){var p=N[S];p.d&&(q=v?o(u).diff(h,p.d,!0):h.diff(u,p.d,!0));var b=(s.rounding||Math.round)(Math.abs(q));if(B=q>0,b<=p.r||!p.r){b<=1&&S>0&&(p=N[S-1]);var Y=H[p.l];C&&(b=C(""+b)),P=typeof Y=="string"?Y.replace("%d",b):Y(b,l,p.l,B);break}}if(l)return P;var z=B?H.future:H.past;return typeof z=="function"?z(P):z.replace("%s",P)},i.to=function(u,l){return d(u,l,this,!0)},i.from=function(u,l){return d(u,l,this)};var x=function(u){return u.$u?o.utc():o()};i.toNow=function(u){return this.to(x(this),u)},i.fromNow=function(u){return this.from(x(this),u)}}})})(Lt);const At=W;var ne={},Ft={get exports(){return ne},set exports(t){ne=t}};(function(t,n){(function(s,a){t.exports=a(jt)})(G,function(s){function a(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var o=a(s),i={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(r){return r+"º"}};return o.default.locale(i,null,!0),i})})(Ft);_.extend(Dt);_.locale("es");_.extend(At);_.updateLocale("es",{relativeTime:{future:"en %s",past:"hace %s",s:"1 s",m:"1 min",mm:"%d min",h:"1 h",hh:"%d h",d:"1 d",dd:"%d d",M:"1 M",MM:"%d M",y:"1 Y",yy:"%d Y"}});const Rt=({date:t})=>e.jsx(f,{align:"left",children:_(t).from(new Date)});function Et({initialStatus:t,result:n,id:s}){const[a,o]=c.useState(!1),[i,r]=c.useState(t),{user:d}=c.useContext(le);c.useEffect(()=>{r(t)},[t]),c.useEffect(()=>{M.rulesStatus.get(Number(s)).then(l=>o(!!l))},[s]);const x=n.isActiveOriginal!==i;c.useEffect(()=>{a&&n.isActiveOriginal===i&&M.rulesStatus.delete(Number(s))},[i,s,a,n.isActiveOriginal]);const u=c.useCallback(async l=>{r(l.target.checked);const h=await M.rulesStatus.get(Number(s));(!a||n.isActiveOriginal!==l.target.checked)&&await M.rulesStatus.put({...h,id:Number(s),newStatus:l.target.checked,updated_at:new Date,languageId:n.lang_id,qualityProfileId:Number(n.qualityProfile_id),user_email:d==null?void 0:d.email}),o(!0)},[s,a,n.isActiveOriginal,n.lang_id,n.qualityProfile_id,d==null?void 0:d.email]);return e.jsxs(g,{direction:"row",alignItems:"center",children:[e.jsx(f,{minWidth:60,children:i?"Activo":"Inactivo"}),e.jsx(de,{onChange:u,checked:i}),a&&x?e.jsx(Me,{}):""]})}function Ot(t){const{tags:n,isActive:s,dateSonar:a,ruleTitle:o,ruleDescription:i}=t;return e.jsxs(j,{children:[e.jsxs(g,{padding:2,direction:"column",spacing:2,children:[e.jsxs(g,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[e.jsx(w,{sx:{backgroundColor:({palette:r})=>r.mode===Z.DARK?r.grey[900]:r.grey[800],color:"white"},label:`Regla ${s?"activo":"inactivo"} desde:`}),e.jsx(w,{label:`${a??"Sin info"}`})]}),e.jsx(g,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:n.map(r=>e.jsx(w,{label:r},r))})]}),e.jsx(g,{direction:"row",justifyContent:"flex-start",alignItems:"center",padding:2,pb:0,children:e.jsx(Q,{title:o,children:e.jsx(w,{color:"secondary",label:e.jsx(f,{noWrap:!0,variant:"h5",children:o})})})}),e.jsxs(g,{direction:"column",justifyContent:"center",padding:2,children:[e.jsx(g,{direction:"row",justifyContent:"flex-start",children:e.jsx(w,{label:"Descripción de la Regla",sx:{backgroundColor:({palette:r})=>r.mode===Z.DARK?r.grey[900]:r.grey[800],color:"white"}})}),e.jsx(f,{dangerouslySetInnerHTML:{__html:i}})]})]})}var U={},L={},qt={get exports(){return L},set exports(t){L=t}};(function(t){function n(s){return s&&s.__esModule?s:{default:s}}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(qt);var $={};const Bt=Oe(Pe);var se;function ye(){return se||(se=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=Bt}($)),$}var Ht=L;Object.defineProperty(U,"__esModule",{value:!0});var be=U.default=void 0,Nt=Ht(ye()),Yt=e,zt=(0,Nt.default)((0,Yt.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),"History");be=U.default=zt;function $t({comments:t}){return e.jsx(it,{sx:{[`& .${lt.root}:before`]:{flex:0,padding:0}},children:t.map(n=>e.jsxs(ot,{children:[e.jsxs(ct,{children:[e.jsx(dt,{color:"primary",children:e.jsx(be,{})}),e.jsx(ut,{})]}),e.jsx(ht,{children:e.jsxs(j,{sx:{textAlign:"left"},children:[e.jsx(f,{variant:"subtitle2",sx:{fontSize:"1rem",fontWeight:"bold",color:"black"},children:n.timestamp}),e.jsx(f,{variant:"body1",children:n.author}),e.jsx(f,{variant:"body1",children:n.content})]})})]},n.id))})}const Qt=[{tab:"description",content:({result:t})=>e.jsx(Ot,{tags:[t.severity,t.type],isActive:t.isActive,ruleTitle:t.name,ruleDescription:t.htmlDesc})},{tab:"history",content:()=>{const t=$e(8);return e.jsxs(j,{height:"100%",display:"flex",flexDirection:"column",children:[e.jsx(j,{flexGrow:1,overflow:"auto",flexBasis:"75%",children:e.jsx($t,{comments:t})}),e.jsx(T,{}),e.jsx(j,{height:"30%",overflow:"auto",p:2,children:e.jsxs(g,{direction:"row",pr:2,children:[e.jsx(f,{sx:{fontStyle:"italic",fontWeight:900},children:"Sustento de la propuesta"}),e.jsx(Se,{result:{id:"1",created_at:new Date,isActive:!0,isActiveSonar:!1,qualityProfile_id:"profile-id",rule_id:"rule-id",updated_at:new Date,key:"rule-key",lang_id:"language-id",name:"rule-name",user_email:"user@example.com"},title:"Sustento de la propuesta"})]})})]})}}],Vt=({isDrawerOpen:t,setIsDrawerOpen:n,result:s})=>{const[a,o]=c.useState("");c.useEffect(()=>{t||o("")},[t]);const i=u=>{u.stopPropagation(),n(!t),a==="description"&&o("")},r=(u,l)=>{o(l)},d=u=>{u.stopPropagation()},x=Qt.find(u=>u.tab===a);return e.jsxs(ue,{anchor:"right",open:t,onClose:i,onClick:d,PaperProps:{style:{width:"42.5%"}},children:[e.jsxs(xt,{value:a,onChange:r,variant:"fullWidth","aria-label":"Drawer tabs",children:[e.jsx(te,{label:"Descripción de Reglas",value:"description"}),e.jsx(te,{label:"Historial de Cambios",value:"history"})]}),x&&x.content({result:s})]})},Wt=({resource:t,value:n,result:s,secondaryValue:a})=>{const[o,i]=c.useState(!1),r=()=>{i(!o)};return t==="isActiveSonar"?e.jsx(f,{children:n?"Activo":"Inactivo"}):t==="htmlDesc"?e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:r,children:e.jsx(Te,{})}),e.jsx(Vt,{isDrawerOpen:o,setIsDrawerOpen:i,result:s})]}):t==="updated_at"?Math.abs(_(String(n)).diff(a,"hours"))>6?e.jsx(Rt,{date:String(n)}):e.jsx(f,{align:"left",children:"--"}):e.jsx(Et,{initialStatus:!!n,result:s,id:s.id})},Gt=({colSpan:t})=>e.jsx(y,{colSpan:t,children:e.jsx(j,{display:"grid",sx:{placeContent:"center",minHeight:400},children:e.jsx(E,{})})}),Kt=({icon:t,primaryText:n,secondaryText:s})=>e.jsxs(g,{direction:"column",justifyContent:"center",alignItems:"center",minHeight:"50vh",sx:{fontSize:100},gap:8,children:[t,e.jsxs(g,{direction:"column",gap:4,children:[e.jsx(f,{color:"GrayText",variant:"h3",children:n}),s&&e.jsx(f,{textAlign:"center",color:"GrayText",variant:"body1",children:s})]})]}),Ut=({hasContent:t,children:n,colSpan:s})=>t?e.jsx(e.Fragment,{children:n}):e.jsx(D,{children:e.jsx(y,{colSpan:s,children:e.jsx(Kt,{icon:e.jsx(De,{color:"disabled",fontSize:"inherit"}),primaryText:"Sin datos",secondaryText:"Selecciona filtros"})})}),Jt=({children:t,collapseContent:n,colSpan:s})=>{const[a,o]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(D,{sx:{cursor:"pointer",":hover":{backgroundColor:({palette:i})=>i.grey[400]}},onClick:()=>{o(i=>!i)},children:t}),e.jsxs(D,{children:[e.jsx(y,{padding:a?"normal":"none",colSpan:2}),e.jsx(y,{colSpan:s,padding:a?"normal":"none",children:e.jsx(ft,{in:a,children:n})})]})]})};var J={},Xt=L;Object.defineProperty(J,"__esModule",{value:!0});var _e=J.default=void 0,Zt=Xt(ye()),en=e,tn=(0,Zt.default)((0,en.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");_e=J.default=tn;const Se=({title:t,result:n})=>{const{user:s}=c.useContext(le),a=mt(async({target:o})=>await M.saveDescription({...n,user_email:s==null?void 0:s.email},o.value),500);return e.jsx(nt,{multiline:!0,fullWidth:!0,defaultValue:n.description,title:t,placeholder:"Esta regla aún no ha tenido observaciones",onChange:a})};function nn(){const[t,n,{data:s,isFetching:a,total:o,page:i,rowsPerPage:r}]=Qe(),d=c.useCallback((l,h)=>{l&&t(h+1)},[t]),x=c.useCallback(l=>{n(parseInt(l.target.value,10)),t(1)},[t,n]),u=()=>{};return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{body:a?e.jsx(Gt,{colSpan:I.length}):e.jsx(Ut,{hasContent:!!(s!=null&&s.length),colSpan:I.length,children:a?[]:s==null?void 0:s.map(l=>e.jsx(Jt,{colSpan:I.length-2,collapseContent:e.jsxs(g,{direction:"row",pr:2,children:[e.jsx(Q,{title:"Editar propuesta",children:e.jsx(O,{onClick:u,children:e.jsx(_e,{})})}),e.jsx(f,{sx:{fontStyle:"italic",fontWeight:900},children:"Sustento de la propuesta"}),e.jsx(Se,{result:l,title:`${l.id}-comments`})]}),children:I.map(({resource:h,especialConfig:v,textAlign:C})=>v?e.jsx(y,{sx:{textAlign:C??"center"},children:e.jsx(Wt,{result:l,resource:h,secondaryValue:l.created_at,value:l[h]??"--"})},h+l.id):e.jsx(y,{sx:{textAlign:C??"center",maxWidth:140},children:e.jsx(Q,{title:String(l[h]??"--"),children:e.jsx(f,{noWrap:!0,sx:{...h==="key"?{width:60}:{}},children:We(String(l[h]??"--"),h==="key")})})},h+l.id))},l.id))}),header:e.jsx(Pt,{data:I})}),e.jsx(j,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(tt,{rowsPerPage:r,count:o??1e3,page:i-1,onPageChange:d,onRowsPerPageChange:x,labelRowsPerPage:"Filas por página"})})]})}const sn=({content:t})=>e.jsx("div",{style:{position:"sticky",bottom:20,left:"90vw",width:40,display:"flex",justifyContent:"flex-end",zIndex:500},children:t}),an=({input:t,id:n,label:s})=>e.jsxs(A,{sx:{width:200},children:[e.jsx(F,{id:n,children:s}),t]}),rn=({label:t,labelId:n,inputProps:s,config:a})=>e.jsx(R,{labelId:n,label:t,sx:{width:200},defaultValue:"all",displayEmpty:!0,inputProps:s,children:a==null?void 0:a.map(({value:o,label:i})=>e.jsx(m,{value:o,children:i},i))}),ln=[{id:"type-uncontrolled",label:"Type",registerField:"type",config:je},{id:"severity-uncontrolled",label:"Severity",registerField:"severity",config:ve},{id:"state-uncontrolled",label:"State",registerField:"state",config:Ce}],on=({handleChanges:t,text:n,inputProps:s,includeAllOptions:a})=>{const{data:o,isFetching:i}=fe(n==="all"?"":n);if(i)return e.jsx(E,{});const[r]=o??[];return e.jsxs(A,{sx:{width:200},children:[e.jsx(F,{id:"qualityProfile-uncontrolled",children:"Quality Profile"}),e.jsxs(R,{inputProps:s,onChange:t,label:"Quality Profile",labelId:"qualityProfile-uncontrolled",defaultValue:a?"all":r==null?void 0:r.id,children:[a&&e.jsx(m,{value:"all",children:"Todos"}),o==null?void 0:o.map(({id:d,name:x})=>e.jsx(m,{value:d,children:x},d))]})]})},cn=({handleClose:t,isOpen:n})=>{const{register:s,handleSubmit:a}=Ct(),[o,i]=c.useState(),[r,d]=c.useState(!0),x=c.useCallback(async l=>await Ge().downloadReport({lang_id:l.language_id,qualityProfile_id:l.qualityProfile_id,severity:l.severity,type:l.type,isActiveSonar:l.state},l.showOnlyIsActiveDifferences),[]),u=c.useCallback(l=>{i(l.target.value)},[]);return e.jsx(ue,{variant:"persistent",onClose:t,anchor:"right",open:n,children:e.jsx(g,{sx:{minWidth:400},component:"form",onSubmit:a(x),children:e.jsxs(st,{children:[e.jsx(k,{children:e.jsx(at,{control:e.jsx(de,{...s("showOnlyIsActiveDifferences"),checked:!r,onChange:l=>d(!l.target.checked)}),label:"Solo estados propuestos"})}),e.jsx(T,{}),e.jsx(k,{children:e.jsx(ge,{includeAllOption:r,inputProps:s("language_id"),className:"generic-filter-uncontrolled",handleChange:u})}),e.jsx(k,{children:e.jsx(on,{includeAllOptions:r,text:o,inputProps:s("qualityProfile_id")})}),r&&e.jsxs(e.Fragment,{children:[e.jsx(T,{}),ln.map(({id:l,label:h,registerField:v,config:C})=>e.jsx(k,{children:e.jsx(an,{label:h,id:l,input:e.jsx(rn,{config:C,label:h,labelId:l,inputProps:s(v)})})},l+h))]}),e.jsx(T,{}),e.jsx(k,{children:e.jsx(gt,{type:"submit",variant:"contained",startIcon:e.jsx(ae,{}),sx:{width:"100%"},children:"Descargar"})})]})})})},dn=()=>{const[t,n]=c.useState(!1),s=c.useCallback(()=>{n(!0)},[]),a=c.useCallback(()=>{n(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(m,{onClick:s,children:[e.jsx(he,{children:e.jsx(ae,{})}),e.jsx(xe,{children:"Descarga Personalizada"})]}),e.jsx(cn,{handleClose:a,isOpen:t})]})},un=()=>{const[t]=Ke();return e.jsxs(m,{onClick:t,children:[e.jsx(he,{children:e.jsx(Le,{fontSize:"small"})}),e.jsx(xe,{children:"Restaurar"})]})},hn=()=>{const[t,n]=c.useState(null),s=c.useRef(null),a=Ue(),o=c.useCallback(()=>{n(null)},[]);c.useEffect(()=>{n(a?s.current:null)},[a]);const i=c.useCallback(({currentTarget:r})=>{n(r)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(vt,{children:e.jsx(O,{ref:s,onClick:i,sx:{background:({palette:r})=>r.secondary.main,zIndex:500},className:"dragableMenu",children:e.jsx(Ae,{fontSize:"large"})})}),e.jsxs(ce,{className:"menuDragable",anchorEl:t,open:!!t,onClose:o,children:[e.jsx(Je,{}),e.jsx(dn,{}),e.jsx(un,{})]})]})},xn=()=>{const t=ie(),n=Xe(),[s,a]=c.useState(),[o]=pt(s,1e3),i=c.useMemo(()=>t&&n,[t,n]),r=c.useCallback(({target:d})=>{a(d.value)},[]);return c.useEffect(()=>{a(""),ee()},[t,n]),c.useEffect(()=>{ee(o)},[o]),e.jsx(rt,{value:s,disabled:!i,onChange:r,startAdornment:e.jsx(Fe,{})})};function En(){return e.jsxs(e.Fragment,{children:[e.jsxs(g,{gap:3,children:[e.jsxs(f,{children:[e.jsx(Re,{})," Activa o desactiva los switches dependiendo si deseas habilitar la regla o no"]}),e.jsxs(f,{children:[e.jsx(Ee,{})," Recuerda que los estados que propongas no se aplicarán de inmediato en SonarQube"]})]}),e.jsx(g,{direction:"column",gap:4,marginTop:4,children:e.jsxs(j,{display:"flex",gap:4,children:[e.jsx(bt,{}),e.jsx(_t,{}),e.jsx(xn,{})]})}),e.jsx(nn,{}),e.jsx(sn,{content:e.jsx(hn,{})})]})}export{En as default};
