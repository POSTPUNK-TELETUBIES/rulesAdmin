import{e as x,r as R,d as j}from"./vendor-b612640b.js";import{d as D}from"./dexie-3976de5d.js";var b={},T={get exports(){return b},set exports(m){b=m}};const I=x(D);(function(m,w){(function(a,f){f(w,I,R)})(j,function(a,f,y){function g(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var l=g(y);function d(e,s,t){var u,c;typeof e=="function"?(u=s||[],c=t):(u=[],c=s);var n=l.default.useRef({hasResult:!1,result:c,error:null}),v=l.default.useReducer(function(r){return r+1},0);v[0];var p=v[1],P=l.default.useMemo(function(){var r=typeof e=="function"?e():e;if(!r||typeof r.subscribe!="function")throw e===r?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!n.current.hasResult&&typeof window<"u")if(typeof r.getValue=="function")n.current.result=r.getValue(),n.current.hasResult=!0;else{var i=r.subscribe(function(o){n.current.result=o,n.current.hasResult=!0});typeof i=="function"?i():i.unsubscribe()}return r},u);if(l.default.useDebugValue(n.current.result),l.default.useEffect(function(){var r=P.subscribe(function(i){var o=n.current;(o.error!==null||o.result!==i)&&(o.error=null,o.result=i,o.hasResult=!0,p())},function(i){var o=n.current;o.error!==i&&(o.error=i,p())});return typeof r=="function"?r:r.unsubscribe.bind(r)},u),n.current.error)throw n.current.error;return n.current.result}function h(e,s,t){return d(function(){return f.liveQuery(e)},s||[],t)}function E(e,s,t){if(!e)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var u;if(arguments.length>=3){if(!("transaction"in e))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if(typeof s!="string")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!t||typeof t!="object")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");u=e}else{if(e instanceof f.Dexie)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if(typeof e.table=="function"&&typeof e.db=="object")u=e.db,t=e,s=e.table();else throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)")}if(!("cloud"in u))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in u.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return d(function(){return u.cloud.permissions(t,s)},[t.realmId,t.owner,s])}a.useLiveQuery=h,a.useObservable=d,a.usePermissions=E,Object.defineProperty(a,"__esModule",{value:!0})})})(T,b);export{b as d};
