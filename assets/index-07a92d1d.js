import{j as e,ae as E,af as F}from"./@mui/icons-material-21caf791.js";import{r as u}from"./vendor-207237f2.js";import{u as I,s as O,y as U,D as A,b as _,x as C}from"./@mui/lab-a904190e.js";import{u as z,t as B,o as V,F as h,I as x,O as g,v as D,S as v,B as S,w as k,G as f}from"./@mui/material-9558fc6b.js";import{a as R,u as L}from"./react-hook-form-51a9c024.js";import{u as q}from"./notistack-7f28b1fa.js";import{u as M,a as T}from"./index-0b6f5c0d.js";import{c as G,a as w}from"./yup-c6b5b3b0.js";import{i as H,n as Q}from"./@hookform/resolvers-84fb29f2.js";import{u as Y}from"./react-router-dom-e9e8f079.js";import{b as $}from"./react-lazy-load-image-component-3f9d37e3.js";import"./@emotion/react-23f5b1b9.js";import"./@emotion/styled-94d978bf.js";import"./@supabase/supabase-js-e8fae348.js";import"./@supabase/postgrest-js-d220d860.js";import"./react-auth-kit-6f8283cb.js";import"./dexie-911c5dc6.js";import"./dexie-react-hooks-efe53238.js";import"./axios-4a70c6fc.js";import"./papaparse-6ea79c53.js";import"./@react-rxjs/utils-31d3d490.js";import"./@react-rxjs/core-8fefe617.js";import"./@tanstack/react-query-b125ade5.js";import"./@reactour/tour-6e99e852.js";import"./hotkeys-js-46483ca1.js";const W=({handleClose:m,handleOpen:s,isOpen:n,content:l})=>{const i=I(),t=z(i.breakpoints.up("md"));return e.jsx(B,{PaperProps:{sx:{justifyContent:"center"}},onOpen:s,onClose:m,open:n,anchor:t?"right":"bottom",children:e.jsx(V,{sx:J,children:l})})},J={maxWidth:500,width:{md:"50vw"},minHeight:"50vh",display:"grid",placeContent:"center"},y=({inputProps:m,disabled:s,id:n="password",label:l="Contraseña"})=>{const[i,t]=u.useState(!1),r=u.useCallback(()=>{t(d=>!d)},[]);return e.jsxs(h,{disabled:s,children:[e.jsx(x,{htmlFor:n,children:l}),e.jsx(g,{id:n,type:i?"text":"password",inputProps:m,autoComplete:"current-password",endAdornment:e.jsx(D,{position:"end",children:e.jsx(O,{"aria-label":"toggle password visibility",onMouseDown:d=>d.preventDefault(),edge:"end",onClick:r,children:i?e.jsx(E,{}):e.jsx(F,{})})}),label:l})]})},K=G().shape({email:w().email("Es necesario un correo electronico válido").required("El correo es obligatorio"),password:w().required("La contraseña es obligatoria").min(6,"La contraseña debe ser mínima de 6 caracteres")});function X(m,s,n){return s===void 0&&(s={}),n===void 0&&(n={}),function(l,i,t){try{return Promise.resolve(function(r,d){try{var o=(s.context,Promise.resolve(m[n.mode==="sync"?"validateSync":"validate"](l,Object.assign({abortEarly:!1},s,{context:i}))).then(function(a){return t.shouldUseNativeValidation&&H({},t),{values:n.raw?l:a,errors:{}}}))}catch(a){return d(a)}return o&&o.then?o.then(void 0,d):o}(0,function(r){if(!r.inner)throw r;return{values:{},errors:Q((d=r,o=!t.shouldUseNativeValidation&&t.criteriaMode==="all",(d.inner||[]).reduce(function(a,c){if(a[c.path]||(a[c.path]={message:c.message,type:c.type}),o){var j=a[c.path].types,b=j&&j[c.type];a[c.path]=R(c.path,o,a,c.type,b?[].concat(b,c.message):c.message)}return a},{})),t)};var d,o}))}catch(r){return Promise.reject(r)}}}const Z=m=>Object.entries(m).filter(([,s])=>s&&s.message).map(([s,n])=>`${s}: ${n.message}`).join(`
`);function ee({singUpClick:m,isSingUpAvailable:s}){const{handleSubmit:n,register:l,resetField:i,formState:{errors:t}}=L({resolver:X(K)}),{data:r,setLoginInfo:d,isFetching:o,error:a}=M(),c=Y(),{enqueueSnackbar:j}=q(),b=({email:P,password:N})=>{d({email:P,password:N}),i("password")};return u.useEffect(()=>{!a&&r&&c("/admin")},[a,r,c]),u.useEffect(()=>{Object.values(t).some(Boolean)&&j({message:Z(t),variant:"error"})},[t,j]),e.jsxs(v,{component:"form",onSubmit:n(b),spacing:2,children:[e.jsx(S,{display:"flex",justifyContent:"center",children:e.jsx(U,{sx:{width:80,height:80}})}),e.jsxs(h,{disabled:o,children:[e.jsx(x,{htmlFor:"email",children:"Correo Electronico"}),e.jsx(g,{id:"email",label:"Correo Electronico",inputProps:l("email"),autoComplete:"email"})]}),e.jsx(y,{disabled:o,inputProps:l("password")}),e.jsx(A,{type:"submit",variant:"contained",disabled:o,loading:o,children:"Iniciar Sesión"}),s&&e.jsxs(_,{align:"center",children:["¿Aún no te registras? ",e.jsx(k,{onClick:m,children:"Registrate"})," "]})]})}const se=({handleLoginClick:m})=>{const{register:s,handleSubmit:n}=L(),{setRegisterInfo:l,isFetching:i}=T(),t=u.useCallback(r=>{l(r)},[]);return e.jsxs(v,{component:"form",onSubmit:n(t),spacing:2,children:[e.jsxs(h,{disabled:i,children:[e.jsx(x,{htmlFor:"email",children:"Email"}),e.jsx(g,{id:"email",label:"Email",inputProps:s("email")})]}),e.jsx(y,{inputProps:s("password")}),e.jsx(y,{id:"confirmPassword",label:"Confirm Password",inputProps:s("confirmPassword")}),e.jsxs(h,{disabled:i,children:[e.jsx(x,{htmlFor:"username",children:"Username"}),e.jsx(g,{id:"username",label:"Username",inputProps:s("username")})]}),e.jsxs(h,{disabled:i,children:[e.jsx(x,{htmlFor:"lastName",children:"Apellido"}),e.jsx(g,{id:"lastName",label:"Apellido",inputProps:s("lastName")})]}),e.jsxs(h,{disabled:i,children:[e.jsx(x,{htmlFor:"firstName",children:"Nombre"}),e.jsx(g,{id:"firstName",label:"Nombre",inputProps:s("firstName")})]}),e.jsx(C,{type:"submit",variant:"contained",children:"Sing up"}),e.jsxs(_,{align:"center",children:["¿Ya tienes cuenta? ",e.jsx(k,{onClick:m,children:"Log in"})]})]})},te="_container_862mo_1",ne="_imgContainer_862mo_5",ie="_img_862mo_5",re="_textContainer_862mo_18",oe="_title_862mo_36",ae="_subtitle_862mo_40",p={container:te,imgContainer:ne,"lazy-load-image-background":"_lazy-load-image-background_862mo_10",img:ie,textContainer:re,title:oe,subtitle:ae},Oe=({isSingUpAvailable:m})=>{const[s,n]=u.useState(!1),[l,i]=u.useState(!0),t=u.useCallback((a=!0)=>()=>{n(!0),i(a)},[]),r=u.useCallback(()=>{n(!1)},[]),d=u.useCallback(()=>{i(!1)},[]),o=u.useCallback(()=>{i(!0)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(f,{container:!0,columns:{xs:6,md:12},className:p.container,children:[e.jsx(f,{item:!0,xs:6,className:p.imgContainer,children:e.jsx($.LazyLoadImage,{src:"admin3.webp",className:p.img,alt:"chica sujetando en sus manos una laptop de colo negra",effect:"blur",width:"100%"})}),e.jsx(f,{item:!0,xs:6,children:e.jsxs(S,{p:{xs:3,sm:8,lg:14},className:p.textContainer,children:[e.jsx("h2",{className:p.title,children:"Administración de reglas de SonarQube"}),e.jsx("h3",{className:p.subtitle,children:"Personalize y configure sin esfuerzo para optimizar la calidad del codigo."}),e.jsxs(v,{gap:2,direction:{sm:"column",md:"row"},marginTop:{xs:2,sm:4},children:[m&&e.jsx(C,{variant:"contained",onClick:t(!1),children:"Registrate"}),e.jsx(C,{variant:"outlined",onClick:t(),sx:{px:6},style:{alignSelf:"center",width:"max-content"},children:"Iniciar sesión"})]})]})})]}),e.jsx(W,{content:l?e.jsx(ee,{singUpClick:d}):e.jsx(se,{handleLoginClick:o}),handleClose:r,handleOpen:t,isOpen:s})]})};export{Oe as default};
