var ke=Object.defineProperty;var Te=(n,t,s)=>t in n?ke(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var v=(n,t,s)=>(Te(n,typeof t!="symbol"?t+"":t,s),s);import{j as e,z as oe,Z as Ie,$ as Pe,a0 as Ee,a1 as Le,a2 as Ae,a3 as Fe,a4 as Oe,a5 as Be,a6 as De,a7 as qe,a8 as Ne,a9 as Ye}from"./@mui/icons-material-77e251a8.js";import{a as $e,r as l,d as Z,b as Qe}from"./vendor-b612640b.js";import{c as j}from"./@react-rxjs/utils-24ca515a.js";import{b as C}from"./@react-rxjs/core-1a0bb4f0.js";import{a as ze}from"./axios-760d4776.js";import{c as Ve}from"./@supabase/supabase-js-f1992ef7.js";import{u as X,Q as Ue,a as He}from"./@tanstack/react-query-7cfe65c4.js";import{C as ee,F as ie,I as le,S as ce,M as _,u as Ge,T as Ke,a as Je,P as We,b as Ze,c as Xe,d as et,e as tt,f as nt,g as N,h as st,B as T,i as ue,j as at,k as te,l as U,m as A,n as p,o as m,p as L,q as rt,r as ot,s as it,A as lt,t as de,v as ct,L as he,w as ge}from"./@mui/material-f12f9543.js";import{u as ut,T as dt}from"./@reactour/tour-e24be7d6.js";import{d as ht,a as P}from"./dayjs-c0cd33fe.js";import{$ as gt}from"./dexie-076b7a5e.js";import{c as pt}from"./react-draggable-09338288.js";import{h as mt}from"./hotkeys-js-d20e5801.js";import"./@emotion/react-0d101b94.js";import"./@emotion/styled-6b07d811.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();var H={},se=$e;H.createRoot=se.createRoot,H.hydrateRoot=se.hydrateRoot;const[ft,xt]=j(),[pe]=C(ft,""),[yt,jt]=j(),[me]=C(yt,"all"),[Ct,bt]=j(),[fe]=C(Ct,null),[vt,wt]=j(),[xe]=C(vt,"all"),[St,ae]=j(),[ye]=C(St,""),[_t,Mt]=j();C(_t,0);const[Rt,G]=j(),[kt]=C(Rt,1),[Tt,It]=j(),[Pt]=C(Tt,!1),je=n=>{const t={VITE_SUPABASE_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZueGZtZnNmdGR3aGlhaGxnb3pnIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODE5NTQ2MjIsImV4cCI6MTk5NzUzMDYyMn0.2-lbg4bjMgp6MxaHUpHd1qTIHoydHr0uXAi78MZ06h4",VITE_WOOPRA_DOMAIN:"pacifico.dev.com",VITE_SUPABASE_URL:"https://fnxfmfsftdwhiahlgozg.supabase.co",VITE_TYPE_CLIENT:"supabase",BASE_URL:"/rulesAdmin",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[n];if(!t)throw new Error(`Not found env ${n}`);return t},Ce=je("VITE_SUPABASE_TOKEN"),be=je("VITE_SUPABASE_URL"),Et="supabase",w=class{constructor(t){this.client=t}downloadReport(t){throw new Error("Method not implemented.")}postNewStatus(t){throw new Error("Method not implemented.")}async getTotalCountByTable(t){return 100}static getInstance(){return w.instance??(w.instance=new w(ze.create({baseURL:be,headers:{apiKey:Ce}}))),w.instance}async getPaginatedRulesByFilter(t,s){const{data:a}=await this.client.get("/rules",{params:{...t,...s}});return{data:a,count:100}}async getQualityProfilesByLanguage(t){const{data:s}=await this.client.get("/qualityprofiles",{params:{language_id:t}});return s}async getAllLanguages(){const{data:t}=await this.client.get("/languages");return t}};let D=w;v(D,"instance");const Lt=D.getInstance,f=class{constructor(t){this.client=t}async getCSVReportUpdatables(t){return await this.client.rpc("get_changed_q",{quality_id:Number(t)}).select("*").csv().throwOnError()}async getCSVCompletFiltered(t){return await this.prepareFilteredQuery(t).csv().throwOnError()}async downloadReport(t,s=!0){const{data:a}=s?await this.getCSVReportUpdatables(Number(t.qualityProfile_id)):await this.getCSVCompletFiltered(t),r=document.createElement("a");r.download="report";const o=URL.createObjectURL(new Blob([a],{type:"text/csv"}));r.href=o,r.click(),URL.revokeObjectURL(o),r.remove()}changeIsActive(t,s=!0){if(t.length)return this.client.from("status").update({isActive:s,updated_at:new Date}).in("id",t.map(({id:a})=>a)).throwOnError()}async postNewStatus(t){const s=t.filter(({newStatus:r})=>!r),a=t.filter(({newStatus:r})=>r);await Promise.all([this.changeIsActive(s,!1),this.changeIsActive(a,!0)])}async getTotalCountByTable(t){const{count:s}=await this.client.from(t).select("*",{count:"exact",head:!0}).throwOnError();return s??0}async getQualityProfilesByLanguage(t){const{data:s}=await this.client.from("qualityprofiles").select().eq("language_id",t).throwOnError();return s}buildQuery(t,s){for(const a in s){if(!Object.prototype.hasOwnProperty.call(s,a))continue;const r=s[a];r!=="all"&&r!=null&&(t=t.eq(f.queryBuilderColumns[a],r))}return t}prepareFilteredQuery(t){delete t.lang_id;const s=this.client.from("status").select(`
        *,
        qualityprofiles(
          *
        ),
        rules!inner(
          *
        )
      `,{count:"exact"});return this.buildQuery(s,t)}async getPaginatedRulesByFilter(t,s){const a=this.prepareFilteredQuery(t),{data:r,count:o}=await a.range(...this.getRange(s)).order("id",{ascending:!0}).throwOnError();return{data:r,count:o}}async getAllLanguages(){const{data:t}=await this.client.from("languages").select().throwOnError();return t.filter(({name:s})=>f.whiteList[s])}static getInstance(){return f.instance??(f.instance=new f(Ve(be,Ce))),f.instance}getRange({page:t,limit:s=10}){return[(t-1)*s,t*s-1]}};let k=f;v(k,"instance"),v(k,"whiteList",{ts:!0,js:!0,css:!0,java:!0,web:!0}),v(k,"queryBuilderColumns",{severity:"rules.severity",type:"rules.type",isActiveSonar:"isActiveSonar",qualityProfile_id:"qualityProfile_id"});const At=k.getInstance,Ft={axios:Lt,supabase:At},I=Ft[Et](),Ot=()=>{const n=pe(),t=l.useRef(null),{data:s,isFetching:a}=X({queryKey:["qualityprofile",n],queryFn:()=>I.getQualityProfilesByLanguage(n),enabled:!!n});l.useEffect(()=>{var o;ae(((o=t.current)==null?void 0:o.value)??"")},[n]);const r=l.useCallback(o=>{ae(o.target.value)},[]);return a?e.jsx(ee,{}):e.jsxs(ie,{className:"mainFilters",sx:{width:200},children:[e.jsx(le,{id:"qualityprofile",children:"Quality Profile"}),e.jsx(ce,{ref:t,onChange:r,label:"Quality Profile",labelId:"qualityprofile",defaultValue:"",displayEmpty:!0,children:s==null?void 0:s.map(({id:o,name:i})=>e.jsx(_,{value:o,children:i},o))})]})},Bt=()=>{const{setIsOpen:n,isOpen:t}=ut(),{data:s,isLoading:a}=X({queryKey:["languages"],queryFn:()=>I.getAllLanguages()}),r=l.useCallback(o=>{xt(o.target.value)},[]);return l.useEffect(()=>{localStorage.getItem("firstVisit")||(localStorage.setItem("firstVisit",new Date().toDateString()),n(!0))},[n]),l.useEffect(()=>{const o=document.querySelector("body");t?o.style.overflow="hidden":o.style.overflow="auto"},[t]),e.jsx(ie,{sx:{width:200},className:"language",children:a?e.jsx(ee,{}):e.jsxs(e.Fragment,{children:[e.jsx(le,{id:"language",children:"Lenguaje"}),e.jsx(ce,{labelId:"language",label:"Lenguaje",onChange:r,sx:{width:200},defaultValue:"",displayEmpty:!0,children:s==null?void 0:s.map(({id:o,name:i})=>e.jsx(_,{value:o,children:i},o))})]})})};var F=(n=>(n.DARK="dark",n.LIGTH="light",n))(F||{});const ve={fontFamily:["Foco"].join(",")},Dt=oe({palette:{mode:"dark"},typography:{...ve}}),qt=oe({palette:{mode:"light",primary:{main:"#0099CC"},secondary:{main:"#EE2C70"}},typography:{...ve}}),we=l.createContext({toggleColorMode(){}}),Nt=({app:n})=>{const t=Ge("(prefers-color-scheme: dark)"),[s,a]=l.useState(localStorage.getItem("mode")||(t?"light":"dark")),r=l.useMemo(()=>({toggleColorMode(){a(o=>o==="dark"?"light":"dark")}}),[]);return l.useEffect(()=>{localStorage.setItem("mode",s)},[s]),e.jsx(we.Provider,{value:r,children:e.jsxs(Ke,{theme:s==="dark"?Dt:qt,children:[e.jsx(Je,{}),n]})})},Yt=l.memo(function({body:t,header:s,footer:a,stickyHeader:r=!0}){return e.jsxs(We,{sx:{paddingY:4,background:"transparent"},children:[e.jsx(Ze,{sx:{maxHeight:"80vh"},children:e.jsxs(Xe,{stickyHeader:r,children:[e.jsx(et,{children:s}),e.jsx(tt,{sx:{backgroundColor:({palette:o})=>o.mode===F.DARK?o.grey[800]:o.grey[300]},children:t}),a&&t&&e.jsx(nt,{children:a})]})}),!t&&e.jsx("div",{children:"asdsadsadsda"})]})}),$t={width:"80vh",maxWidth:600,minWidth:400,height:"80vh",minHeight:400,borderRadius:50},Qt=l.memo(function({popoverBody:n,icon:t,sxProps:s}){const[a,r]=l.useState(null),o=l.useCallback(d=>{r(d.currentTarget)},[]),i=l.useCallback(()=>{r(null)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(N,{onClick:o,sx:{margin:"auto"},children:t}),e.jsxs(st,{anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:s??$t,open:!!a,onClose:i,anchorEl:a,children:[e.jsx(N,{onClick:i,sx:{position:"absolute",top:0,right:0},children:e.jsx(Ie,{sx:{fontSize:"medium"}})}),e.jsx(T,{margin:1,children:n})]})]})}),S=class extends gt{constructor(){super("syncro");v(this,"rulesStatus");this.version(1).stores({rulesStatus:"id, updated_at, newStatus"})}static getInstance(){return S.instace??(S.instace=new S),S.instace}};let q=S;v(q,"instace");const K=q.getInstance();function zt({initialStatus:n,id:t}){const s=l.useCallback(a=>K.rulesStatus.put({id:Number(t),newStatus:a.target.checked,updated_at:new Date}),[t]);return e.jsx(ue,{onChange:s,defaultChecked:n})}const Vt=({value:n,label:t,reactiveCb:s})=>{const a=l.useCallback(()=>{s(n)},[s,n]);return e.jsx(_,{onClick:a,children:t})},ne=({filterConfig:n,reactiveCallback:t,isClosingRecursive:s})=>{const[a,r]=l.useState(null),[o,i]=l.useState(!0),d=l.useCallback(u=>{t(u),i(u==="all"),s&&r(null)},[s,t]),h=l.useCallback(()=>{r(null)},[]),c=l.useCallback(u=>{u.preventDefault(),r(u.currentTarget)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(N,{onClick:c,sx:{padding:"1px !important"},children:e.jsx(at,{variant:"dot",invisible:o,color:"secondary",children:e.jsx(Pe,{sx:{color:"white"}})})}),e.jsx(te,{anchorEl:a,onClose:h,open:!!a,children:n.map(({value:u,label:g})=>e.jsx(Vt,{label:g,value:u,reactiveCb:d}))})]})},Ut=Object.freeze({all:null,active:!0,deactive:!1}),Ht=[{value:"all",label:"Todos"},{value:"active",label:"Activo"},{value:"deactive",label:"Inactivo"}],Gt=()=>{const n=l.useCallback(t=>{bt(Ut[t])},[]);return e.jsx(ne,{filterConfig:Ht,isClosingRecursive:!0,reactiveCallback:n})};var Se=(n=>(n.Blocker="BLOCKER",n.Critical="CRITICAL",n.Info="INFO",n.Major="MAJOR",n.Minor="MINOR",n))(Se||{}),_e=(n=>(n.Bug="BUG",n.CodeSmell="CODE_SMELL",n.SecurityHotspot="SECURITY_HOTSPOT",n.Vulnerability="VULNERABILITY",n))(_e||{});const Kt=[{value:"all",label:"Todos"},...Object.values(Se).map(n=>({value:n,label:n}))],Jt=()=>{const n=l.useCallback(t=>{wt(t)},[]);return e.jsx(ne,{filterConfig:Kt,isClosingRecursive:!0,reactiveCallback:n})},Wt=[{value:"all",label:"Todos"},...Object.values(_e).map(n=>({value:n,label:n}))],Zt=()=>{const n=l.useCallback(t=>jt(t),[]);return e.jsx(ne,{filterConfig:Wt,isClosingRecursive:!0,reactiveCallback:n})},B=[{label:"Código",resource:"key",textAlign:"left"},{label:"Regla",resource:"name",textAlign:"left"},{label:"Tipo",resource:"type",filter:e.jsx(Zt,{})},{label:"Severidad",resource:"severity",filter:e.jsx(Jt,{})},{label:"Detalle",especialConfig:!0,resource:"htmlDesc"},{label:"Estado Actual",resource:"isActiveSonar",especialConfig:!0,className:"actualState",filter:e.jsx(Gt,{})},{label:"Estado Propuesto",resource:"isActive",especialConfig:!0,className:"proposedState"},{label:"Última Propuesta: ",resource:"updated_at",especialConfig:!0,icon:e.jsx(Ee,{sx:{color:n=>n.palette.common.white}})}],Me=new Ue({defaultOptions:{queries:{staleTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1,_optimisticResults:"optimistic"}}}),Xt=()=>{const n=xe(),t=pe(),s=fe(),a=ye(),r=me(),o=kt(),[i,d]=l.useState(10),h=l.useRef(0),c=!!(t&&a),{data:u,isFetching:g}=X({queryKey:["rules",t,a,r,s,n,o,i],async queryFn(){const{data:M,count:x}=await I.getPaginatedRulesByFilter({severity:n,lang_id:t,isActiveSonar:s,qualityProfile_id:a,type:r},{page:o,limit:i});return h.current=x,Mt(x),M},enabled:c,keepPreviousData:!0}),b=l.useMemo(()=>c?u==null?void 0:u.map(({rules:M,...x})=>({...M,...x})):[],[u,c]);return l.useEffect(()=>{G(1)},[r,n,s,a]),[G,d,{data:b,isLoading:g,total:h.current,page:o,rowsPerPage:i}]},en=()=>{const[n,t]=l.useState(!1);return[l.useCallback(async()=>{t(!0);const a=await K.rulesStatus.toArray();await I.postNewStatus(a),await K.rulesStatus.clear(),await Me.invalidateQueries({queryKey:["rules"]}),G(1),t(!1)},[]),n]},tn=l.memo(({data:n})=>e.jsx(U,{children:n.map(({label:t,icon:s,className:a,filter:r})=>e.jsx(A,{variant:"head",className:a,sx:{background:o=>`${o.palette.grey[900]} !important`},children:e.jsxs(p,{direction:"row",gap:.5,alignItems:"center",justifyContent:"center",children:[s,e.jsx(m,{sx:{color:o=>o.palette.common.white},fontWeight:700,children:t}),r]})},t))})),nn=({icon:n,primaryText:t,secondaryText:s})=>e.jsxs(p,{direction:"column",justifyContent:"center",alignItems:"center",minHeight:"50vh",sx:{fontSize:100},gap:8,children:[n,e.jsxs(p,{direction:"column",gap:4,children:[e.jsx(m,{color:"GrayText",variant:"h3",children:t}),s&&e.jsx(m,{textAlign:"center",color:"GrayText",variant:"body1",children:s})]})]});var J={},sn={get exports(){return J},set exports(n){J=n}};(function(n,t){(function(s,a){n.exports=a()})(Z,function(){return function(s,a,r){r.updateLocale=function(o,i){var d=r.Ls[o];if(d)return(i?Object.keys(i):[]).forEach(function(h){d[h]=i[h]}),d}}})})(sn);const an=J;var W={},rn={get exports(){return W},set exports(n){W=n}};(function(n,t){(function(s,a){n.exports=a()})(Z,function(){return function(s,a,r){s=s||{};var o=a.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function d(c,u,g,b){return o.fromToBase(c,u,g,b)}r.en.relativeTime=i,o.fromToBase=function(c,u,g,b,M){for(var x,O,Y,$=g.$locale().relativeTime||i,Q=s.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],Re=Q.length,E=0;E<Re;E+=1){var y=Q[E];y.d&&(x=b?r(c).diff(g,y.d,!0):g.diff(c,y.d,!0));var R=(s.rounding||Math.round)(Math.abs(x));if(Y=x>0,R<=y.r||!y.r){R<=1&&E>0&&(y=Q[E-1]);var z=$[y.l];M&&(R=M(""+R)),O=typeof z=="string"?z.replace("%d",R):z(R,u,y.l,Y);break}}if(u)return O;var V=Y?$.future:$.past;return typeof V=="function"?V(O):V.replace("%s",O)},o.to=function(c,u){return d(c,u,this,!0)},o.from=function(c,u){return d(c,u,this)};var h=function(c){return c.$u?r.utc():r()};o.toNow=function(c){return this.to(h(this),c)},o.fromNow=function(c){return this.from(h(this),c)}}})})(rn);const on=W;var re={},ln={get exports(){return re},set exports(n){re=n}};(function(n,t){(function(s,a){n.exports=a(ht)})(Z,function(s){function a(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var r=a(s),o={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(i){return i+"º"}};return r.default.locale(o,null,!0),o})})(ln);P.extend(an);P.locale("es");P.extend(on);P.updateLocale("es",{relativeTime:{future:"en %s",past:"hace %s",s:"1 s",m:"1 min",mm:"%d min",h:"1 h",hh:"%d h",d:"1 d",dd:"%d d",M:"1 M",MM:"%d M",y:"1 Y",yy:"%d Y"}});const cn=({date:n})=>e.jsx(m,{align:"left",children:P(n).from(new Date)});function un(n){const{tags:t,isActive:s,dateSonar:a,ruleTitle:r,ruleDescription:o}=n;return e.jsxs(T,{children:[e.jsxs(p,{padding:2,direction:"column",spacing:2,children:[e.jsxs(p,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[e.jsx(L,{sx:{backgroundColor:({palette:i})=>i.mode===F.DARK?i.grey[900]:i.grey[800],color:"white"},label:`Regla ${s?"activo":"inactivo"} desde:`}),e.jsx(L,{label:`${a??"Sin info"}`})]}),e.jsx(p,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:t.map(i=>e.jsx(L,{label:i},i))})]}),e.jsx(p,{direction:"row",justifyContent:"flex-start",alignItems:"center",padding:2,pb:0,children:e.jsx(rt,{title:r,children:e.jsx(L,{color:"secondary",label:e.jsx(m,{noWrap:!0,variant:"h5",children:r})})})}),e.jsxs(p,{direction:"column",justifyContent:"center",padding:2,children:[e.jsx(p,{direction:"row",justifyContent:"flex-start",children:e.jsx(L,{label:"Descripción de la Regla",sx:{backgroundColor:({palette:i})=>i.mode===F.DARK?i.grey[900]:i.grey[800],color:"white"}})}),e.jsx(m,{dangerouslySetInnerHTML:{__html:o}})]})]})}const dn=({resource:n,value:t,result:s,secondaryValue:a})=>n==="isActiveSonar"?e.jsx(m,{children:t?"Activo":"Inactivo"}):n==="htmlDesc"?e.jsx(Qt,{icon:e.jsx(Ae,{}),popoverBody:e.jsx(un,{tags:[s.severity,s.type],isActive:s.isActive,ruleTitle:s.name,ruleDescription:s.htmlDesc})}):n==="updated_at"?Math.abs(P(String(t)).diff(a,"hours"))>6?e.jsx(cn,{date:String(t)}):e.jsx(m,{align:"left",children:"--"}):e.jsx(zt,{initialStatus:!!t,id:s.id});function hn(){const[n,t,{data:s,isLoading:a,total:r,page:o,rowsPerPage:i}]=Xt(),d=l.useCallback((c,u)=>{c&&n(u+1)},[n]),h=l.useCallback(c=>{t(parseInt(c.target.value,10)),n(1)},[n,t]);return e.jsxs(e.Fragment,{children:[e.jsx(Yt,{body:e.jsx(e.Fragment,{children:a?e.jsx(A,{colSpan:B.length,children:e.jsx(T,{display:"grid",sx:{placeContent:"center",minHeight:400},children:e.jsx(ee,{})})}):s!=null&&s.length?s==null?void 0:s.map(c=>e.jsx(U,{children:B.map(({resource:u,especialConfig:g,textAlign:b})=>g?e.jsx(A,{sx:{textAlign:"center"},children:e.jsx(dn,{result:c,resource:u,secondaryValue:c.created_at,value:c[u]??"--"})},u+c.id):e.jsx(A,{sx:{textAlign:b??"center"},children:String(c[u]??"--")},u+c.id))},c.id)):e.jsx(U,{children:e.jsx(A,{colSpan:B.length,children:e.jsx(nn,{icon:e.jsx(Le,{color:"disabled",fontSize:"inherit"}),primaryText:"Sin datos",secondaryText:"Selecciona filtros"})})})}),header:e.jsx(tn,{data:B})}),e.jsx(T,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ot,{rowsPerPage:i,count:r??1e3,page:o-1,onPageChange:d,onRowsPerPageChange:h,labelRowsPerPage:"Filas por pagina"})})]})}const gn=()=>{const{palette:n}=it(),t=l.useContext(we),s=l.useCallback(()=>{t.toggleColorMode()},[t]);return e.jsx(lt,{sx:{background:({palette:a})=>`linear-gradient(90deg, ${a.primary.main} 80%, ${a.secondary.main} 100%)`},children:e.jsx(de,{children:e.jsxs(ct,{disableGutters:!0,sx:{justifyContent:"space-between"},children:[e.jsxs(T,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1},children:[e.jsx(m,{variant:"h6",fontWeight:900,children:"Sonardash"}),e.jsx(m,{variant:"body1",children:"/ Gestión de Reglas"}),e.jsx("img",{src:"https://www.pacifico.com.pe/image/layout_set_logo?img_id=26556784&t=1682438787127",alt:"logo de pacifico seguros"})]}),e.jsxs(p,{direction:"row",justifyContent:"center",alignItems:"center",children:[(n==null?void 0:n.mode)===F.DARK?e.jsx(Fe,{}):e.jsx(Oe,{}),e.jsx(ue,{color:"warning",onChange:s})]})]})})})},pn=({cb:n})=>{const t=xe(),s=fe(),a=ye(),r=me(),[o,i]=l.useState(null),d=l.useCallback(()=>{i(null)},[]),h=l.useCallback(async({currentTarget:g})=>{a&&i(g)},[a]),c=l.useCallback(async()=>{n&&await n(),await I.downloadReport({qualityProfile_id:a})},[n,a]),u=l.useCallback(async()=>{n&&await n(),await I.downloadReport({isActiveSonar:s,qualityProfile_id:a,severity:t,type:r},!1)},[s,a,t,r,n]);return e.jsxs(e.Fragment,{children:[e.jsxs(_,{disabled:!a,onClick:h,children:[e.jsx(he,{children:e.jsx(Be,{})}),e.jsx(ge,{children:"Descarga Personalizada"})]}),e.jsxs(te,{anchorEl:o,onClose:d,open:!!o,children:[e.jsx(_,{onClick:c,children:"Reporte de Actualizables"}),e.jsx(_,{onClick:u,children:"Reporte Completo"})]})]})},mn=()=>{const[n,t]=l.useState(null),s=l.useRef(null),a=Pt(),[r]=en(),o=l.useCallback(()=>{t(null)},[]);l.useEffect(()=>{t(a?s.current:null)},[a]);const i=l.useCallback(({currentTarget:d})=>{t(d)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(pt,{children:e.jsx(N,{ref:s,onClick:i,sx:{background:({palette:d})=>d.secondary.main,zIndex:500},className:"dragableMenu",children:e.jsx(De,{fontSize:"large"})})}),e.jsxs(te,{className:"menuDragable",anchorEl:n,open:!!n,onClose:o,children:[e.jsxs(_,{onClick:r,children:[e.jsx(he,{children:e.jsx(qe,{fontSize:"small"})}),e.jsx(ge,{children:"Sincronizar"})]}),e.jsx(pn,{cb:r})]})]})},fn=({content:n})=>e.jsx("div",{style:{position:"sticky",bottom:20,left:20,display:"flex",justifyContent:"flex-end",zIndex:500},children:n});function xn(){return e.jsx(Nt,{app:e.jsxs(e.Fragment,{children:[e.jsx(gn,{}),e.jsxs(de,{sx:{paddingTop:12},children:[e.jsxs(p,{gap:3,children:[e.jsxs(m,{children:[e.jsx(Ne,{})," Activa o desactiva los switches dependiendo si deseas habilitar la regla o no"]}),e.jsxs(m,{children:[e.jsx(Ye,{})," Recuerda que los estados que propongas no se aplicarán de inmediato en SonarQube"]})]}),e.jsx(p,{direction:"column",gap:4,marginTop:4,children:e.jsxs(T,{display:"flex",gap:4,children:[e.jsx(Bt,{}),e.jsx(Ot,{})]})}),e.jsx(hn,{}),e.jsx(fn,{content:e.jsx(mn,{})}),e.jsx(p,{paddingY:3,direction:"row",gap:3,justifyContent:"space-between"})]})]})})}const yn="pacifico.dev.com";mt("ctrl+m",n=>{n.preventDefault(),It(!0)});window.woopra.config({domain:yn,outgoing_tracking:!0,download_tracking:!0,click_tracking:!0}),window.woopra.track();H.createRoot(document.getElementById("root")).render(e.jsx(Qe.StrictMode,{children:e.jsx(dt,{steps:[{selector:".language",content:"Selecciona el lenguaje de programación del cual deseas consultar reglas."},{selector:".mainFilters",content:"Ahora procede a seleccionar el perfil a consultar"},{selector:".actualState",content:"Este es el estado actual de la regla en Sonarqube. Las reglas activas son las que analizan los repositorios."},{selector:".proposedState",content:"Aquí podrás proponer si una regla debe estar activada o desactivada, recuerda que tu propuesta no se verá reflejada en SonarQube inmediatamente."},{selector:".dragableMenu",content:e.jsxs(m,{children:["Las opciones de descarga y guardado se encuentran en este botón. Si no lo encuentras rápido, ubícalo con ",e.jsx("kbd",{children:"ctrl"})," +"," ",e.jsx("kbd",{children:"m"}),", ¡también lo puedes mover por toda la pantalla!"]})}],children:e.jsx(He,{client:Me,children:e.jsx(xn,{})})})}));
