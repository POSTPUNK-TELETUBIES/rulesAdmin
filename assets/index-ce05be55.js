var _e=Object.defineProperty;var Me=(a,e,s)=>e in a?_e(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var p=(a,e,s)=>(Me(a,typeof e!="symbol"?e+"":e,s),s);import{F as ye,j as t,a3 as De,a4 as le,a5 as Ne,a6 as Ue,a7 as Be,a8 as qe,a9 as Ve,aa as Qe,ab as ze,ac as $e}from"./@mui/icons-material-c2086071.js";import{a as He,r as o,b as Ge}from"./vendor-b612640b.js";import{c as ae,_ as Ke}from"./@supabase/supabase-js-711ba96a.js";import{u as xe,C as We,P as Je,B as V,T as Ze,a as Ye,b as Xe,c as et,d as tt,M as je,L as we,e as be,D as st,f as nt,g as at,h as ue,i as $,j as de,k as rt,l as it,m as ot,S as v,n as ct,A as lt,o as re,p as ut,q as dt,r as ht,s as gt,t as mt,F as A,I as E,O as F,v as pt,w as ee}from"./@mui/material-99b79a59.js";import{w as ft,s as te,x as L,P as yt,b,C as xt,u as Ce,y as jt,z as wt,S as bt}from"./@mui/lab-cc97fd70.js";import{$ as Ct}from"./dexie-3976de5d.js";import{d as St}from"./dexie-react-hooks-0c2ddb12.js";import{a as kt}from"./axios-760d4776.js";import{c as C}from"./@react-rxjs/utils-24ca515a.js";import{b as S}from"./@react-rxjs/core-1a0bb4f0.js";import{Q as vt,u as Se,a as It}from"./@tanstack/react-query-7cfe65c4.js";import{u as ke}from"./react-hook-form-c6612ec3.js";import{u as Tt,S as Pt}from"./notistack-f220509a.js";import{T as Rt}from"./@reactour/tour-e24be7d6.js";import{h as Ot}from"./hotkeys-js-d20e5801.js";import"./@emotion/react-0d101b94.js";import"./@emotion/styled-6b07d811.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var se={},he=He;se.createRoot=he.createRoot,se.hydrateRoot=he.hydrateRoot;var ie=(a=>(a.DARK="dark",a.LIGTH="light",a))(ie||{});const ve={fontFamily:["Foco"].join(",")},At=ye({palette:{mode:"dark"},typography:{...ve}}),Et=ye({palette:{mode:"light",primary:{main:"#0099CC"},secondary:{main:"#EE2C70"}},typography:{...ve}}),Ie=o.createContext({toggleColorMode(){}}),Ft=({app:a})=>{const e=xe("(prefers-color-scheme: dark)"),[s,r]=o.useState(localStorage.getItem("mode")||(e?"light":"dark")),n=o.useMemo(()=>({toggleColorMode(){r(i=>i==="dark"?"light":"dark")}}),[]);return o.useEffect(()=>{localStorage.setItem("mode",s)},[s]),t.jsx(Ie.Provider,{value:n,children:t.jsxs(ft,{theme:s==="dark"?At:Et,children:[t.jsx(We,{}),a]})})},T=class extends Ct{constructor(){super("syncro");p(this,"rulesStatus");this.version(5).stores({rulesStatus:"id, updated_at, newStatus, language, qualityProfileId, description, user_email"})}static getInstance(){return T.instance??(T.instance=new T),T.instance}async getLocalRules(s){return await this.rulesStatus.where("id").anyOf(s).toArray()}async countAllRules(){return await this.rulesStatus.count()}async saveDescription(s,r){const n=await this.rulesStatus.get(s.id);return await this.rulesStatus.put({id:Number(s.id),languageId:s.lang_id,newStatus:s.isActive,qualityProfileId:Number(s.qualityProfile_id),...n,updated_at:new Date,...r?{description:r}:{},user_email:s.user_email})}async getRulesToUpdate(){return await this.rulesStatus.toArray()}};let H=T;p(H,"instance");const _=H.getInstance(),Lt={width:"80vh",maxWidth:600,minWidth:400,height:"80vh",minHeight:400,borderRadius:50},_t=o.memo(function({popoverBody:a,icon:e,sxProps:s,textButton:r,buttonProps:n}){const[i,c]=o.useState(null),l=o.useCallback(d=>{d.stopPropagation(),c(d.currentTarget)},[]),u=o.useCallback(d=>{d.stopPropagation(),c(null)},[]);return t.jsxs(t.Fragment,{children:[r?t.jsx(L,{startIcon:e,onClick:l,...n,children:r}):t.jsx(te,{onClick:l,sx:{margin:"auto"},children:e}),t.jsxs(Je,{anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:s??Lt,open:!!i,onClose:u,anchorEl:i,children:[t.jsx(te,{onClick:u,sx:{position:"absolute",top:0,right:0},children:t.jsx(De,{sx:{fontSize:"medium"}})}),t.jsx(V,{margin:1,children:a})]})]})});var B=(a=>(a.FIRST_VISIT="firstVisit",a.TIMES_VISIT="timesVisit",a))(B||{});const Te=a=>{const e={VITE_SUPABASE_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZueGZtZnNmdGR3aGlhaGxnb3pnIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODE5NTQ2MjIsImV4cCI6MTk5NzUzMDYyMn0.2-lbg4bjMgp6MxaHUpHd1qTIHoydHr0uXAi78MZ06h4",VITE_WOOPRA_DOMAIN:"pacifico.dev.com",VITE_SUPABASE_URL:"https://fnxfmfsftdwhiahlgozg.supabase.co",VITE_TYPE_CLIENT:"supabase",BASE_URL:"/rulesAdmin",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[a];if(!e)throw new Error(`Not found env ${a}`);return e},Gs=(a,e=!0,s=document.body)=>{const r=s.querySelector(a);r&&(r.style.overflow=e?"hidden":"auto")},Mt=(a,e)=>{const s=new Date;return s.setHours(23),a>s&&e<=3},Ks=()=>{const a=localStorage.getItem(B.FIRST_VISIT),e=localStorage.getItem(B.TIMES_VISIT);if(!(a||!Mt(new Date(a),Number(e))))return localStorage.setItem(B.FIRST_VISIT,new Date().toDateString()),localStorage.setItem(B.TIMES_VISIT,((Number(e)||0)+1).toString()),!0},ge=a=>a!=null,Dt={css:1,java:1,web:1,Web:1,javascript:1,typescript:1},Nt=(a,e=Dt)=>{const[s]=a.match(/^.+:/);return e[s.substring(0,s.length-1)]?a.replace(s,""):a},Ws=(a,e,s)=>e?Nt(a,s):a,me=(a,e,s)=>a?e:s,Pe=(a,e,s)=>a==null?void 0:a.reduce((r,n)=>(r[String(n[e])]=s?n[s]:n,r),{}),Ut=()=>{const a=new Date;return a.setUTCHours(0),a.setUTCMinutes(0),a},Z=Te("VITE_SUPABASE_TOKEN"),Y=Te("VITE_SUPABASE_URL"),Bt="supabase",P=class{constructor(e){this.client=e}getConflicts(e){throw new Error("Method not implemented.")}getByRuleName(e,s,r){throw new Error("Method not implemented.")}downloadReport(e){throw new Error("Method not implemented.")}postNewStatus(e){throw new Error("Method not implemented.")}async getTotalCountByTable(e){return 100}static getInstance(){return P.instance??(P.instance=new P(kt.create({baseURL:Y,headers:{apiKey:Z}}))),P.instance}async getPaginatedRulesByFilter(e,s){const{data:r}=await this.client.get("/rules",{params:{...e,...s}});return{data:r,count:100}}async getQualityProfilesByLanguage(e){const{data:s}=await this.client.get("/qualityprofiles",{params:{language_id:e}});return s}async getAllLanguages(){const{data:e}=await this.client.get("/languages");return e}};let G=P;p(G,"instance");const qt=G.getInstance,w=class{constructor(e){this.client=e}async getConflicts(e){const s=Ut().toISOString(),{data:r}=await this.client.from("status").select(`
          *,
          qualityprofiles(
          *
          ),
          rules!inner(
            *
        )
        `).in("id",e.map(({id:c})=>c)).gt("updated_at",s).throwOnError(),n=Pe(r,"id");return e.filter(({id:c,newStatus:l})=>{var u,d;return ge((u=n[c])==null?void 0:u.isActive)&&((d=n[c])==null?void 0:d.isActive)!==l}).map(c=>{const{rules:l,...u}=n[c.id];return{...l,...u,...c}})}async getCSVReportUpdatables(e){return await this.client.rpc("get_changed_q",{quality_id:Number(e)}).select("*").csv().throwOnError()}async getCSVCompletFiltered(e){return await this.prepareFilteredQuery(e).csv().throwOnError()}async downloadReport(e,s=!0){const{data:r}=s?await this.getCSVReportUpdatables(Number(e.qualityProfile_id)):await this.getCSVCompletFiltered(e),n=document.createElement("a");n.download="report";const i=URL.createObjectURL(new Blob([r],{type:"text/csv"}));n.href=i,n.click(),URL.revokeObjectURL(i),n.remove()}changeIsActive(e,s=!0){if(!e.length)return;const[{user_email:r}]=e;return this.client.from("status").update({isActive:s,updated_at:new Date,user_email:r}).in("id",e.map(({id:n})=>n)).throwOnError()}async bulkUpdateDescription(e){if(!e.length)return;const{data:s}=await this.client.auth.getUser();return await this.client.from("status").upsert(e.map(({id:r,description:n,qualityProfileId:i})=>{var c;return{id:r,description:n,qualityProfile_id:i,user_email:(c=s.user)==null?void 0:c.email}})).select().throwOnError()}async postNewStatus(e){const s=e.filter(({newStatus:i})=>!i),r=e.filter(({newStatus:i})=>i),n=e.filter(({description:i})=>!!i);await Promise.all([this.changeIsActive(s,!1),this.changeIsActive(r,!0),this.bulkUpdateDescription(n)])}async getTotalCountByTable(e){const{count:s}=await this.client.from(e).select("*",{count:"exact",head:!0}).throwOnError();return s??0}async getQualityProfilesByLanguage(e){const{data:s}=await this.client.from("qualityprofiles").select().eq("language_id",e).throwOnError();return s}buildQuery(e,s){for(const r in s){if(!Object.prototype.hasOwnProperty.call(s,r))continue;const n=s[r];n!=="all"&&ge(n)&&(e=e.eq(w.queryBuilderColumns[r],n))}return e}prepareFilteredQuery(e){delete e.lang_id;const s=this.client.from("status").select(`
        *,
        qualityprofiles(
          *
        ),
        rules!inner(
          *
        )
      `,{count:"exact"});return this.buildQuery(s,e)}async getPaginatedRulesByFilter(e,s){const r=this.prepareFilteredQuery(e),{data:n,count:i}=await r.range(...this.getRange(s)).order("id",{ascending:!0}).throwOnError();return{data:n,count:i}}async getAllLanguages(){const{data:e}=await this.client.from("languages").select().throwOnError();return e.filter(({name:s})=>w.whiteList[s])}static getInstance(e){return w.instance??(w.instance=new w(e??ae(Y,Z))),w.instance}getRange({page:e,limit:s=10}){return[(e-1)*s,e*s-1]}async getByRuleName(e,s,r){const{data:n,count:i}=await this.prepareFilteredQuery(s).ilike("rules.name",`%${e}%`).range(...this.getRange(r)).order("id",{ascending:!0}).throwOnError();return{data:n,count:i}}subscribeChanges(e){return this.client.channel("changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"status"},e).subscribe()}};let O=w;p(O,"instance"),p(O,"whiteList",{ts:!0,js:!0,css:!0,java:!0,web:!0}),p(O,"queryBuilderColumns",{severity:"rules.severity",type:"rules.type",isActiveSonar:"isActiveSonar",qualityProfile_id:"qualityProfile_id"});const Re=O.getInstance,Oe=ae(Y,Z),Vt={axios:qt,supabase:()=>Re(Oe)},q=Vt[Bt](),[Qt,Js]=C(),[zt]=S(Qt,""),[$t,Zs]=C(),[Ht]=S($t,"all"),[Gt,Ys]=C(),[Kt]=S(Gt,null),[Wt,Xs]=C(),[Jt]=S(Wt,"all"),[Zt,en]=C(),[Yt]=S(Zt,""),[Xt,es]=C();S(Xt,0);const[ts,J]=C(),[ss]=S(ts,1),[ns,as]=C(),[tn]=S(ns,!1),[rs,sn]=C(),[is]=S(rs,null),oe=new vt({defaultOptions:{queries:{staleTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1,_optimisticResults:"optimistic"}}}),k=class{constructor(){if(k.instance)throw new Error("Singleton")}static getInstance(){return k.instance??(k.instance=new k),k.instance}get tokenData(){return{token:localStorage.getItem("token"),refreshToken:localStorage.getItem("refreshToken")}}set tokenData(e){Object.keys(e).forEach(s=>localStorage.setItem(s,e[s]))}clean(){localStorage.removeItem("token"),localStorage.removeItem("refreshToken")}};let K=k;p(K,"instance");const R=class{constructor(e,s=K.getInstance()){p(this,"isLogged");p(this,"user");this.client=e,this.authStorage=s}async singUp({email:e,firstName:s,lastName:r,password:n,username:i}){const{data:c,error:l}=await this.client.signUp({email:e,password:n,options:{data:{first_name:s,last_name:r,username:i}}});if(l)throw l;return c}static getInstance(e){return R.instance??(R.instance=new R(e??ae(Y,Z).auth)),R.instance}setToken(e){this.authStorage.tokenData={refreshToken:e.refresh_token,token:e.access_token}}async login(e,s){const{data:r,error:n}=await this.client.signInWithPassword({email:e,password:s});if(n)throw n;return this.setToken(r.session),this.isLogged=!0,this.user=r.user,r}async verifyAuth(e){const{data:s,error:r}=await this.client.getUser(e);if(r)throw r;return s}async logOut(e){const{error:s}=await this.client.signOut();if(s)throw s;return this.user=null,this.authStorage.clean(),e}async getPermissions(){const{data:e,error:s}=await this.client.mfa.getAuthenticatorAssuranceLevel();if(s)throw s;return e}async checkAuth(e,s){const r=e??this.authStorage.tokenData.token,n=s??this.authStorage.tokenData.refreshToken;if(!r||!n)return;const{data:i,error:c}=await this.client.setSession({access_token:r,refresh_token:n});if(c)throw c;return this.setToken(i.session),this.isLogged=!0,this.user=i.user,i}};let W=R;p(W,"instance");const I=Object.assign(W.getInstance(Oe.auth),{isLoading:!0}),M=o.createContext(I),os=()=>{const a=Jt(),e=zt(),s=Kt(),r=Yt(),n=Ht(),i=ss(),c=is();return{severity:a,lang_id:e,isActiveSonar:s,qualityProfile_id:r,type:n,page:i,textMatchFilter:c}},nn=()=>{const{isActiveSonar:a,lang_id:e,page:s,qualityProfile_id:r,severity:n,textMatchFilter:i,type:c}=os(),[l,u]=o.useState(10),d=o.useRef(0),[f,X]=o.useState([]),[x,h]=o.useState(null),g=!!(e&&r),{data:D,isFetching:Ae,isLoading:Ee,isRefetching:Fe,isFetched:Le}=Se({queryKey:["rules",e,r,c,a,n,s,l,i],async queryFn(){const y={severity:n,lang_id:e,isActiveSonar:a,qualityProfile_id:r,type:c},N={page:s,limit:l},{data:Q,count:z}=i?await q.getByRuleName(i,y,N):await q.getPaginatedRulesByFilter(y,N);return d.current=z,es(z),Q},enabled:g,keepPreviousData:!0});o.useEffect(()=>{J(1)},[c,n,a,r,i]);const ce=o.useCallback(async()=>{if(!g)return;const y=D==null?void 0:D.map(({rules:m,...j})=>{var U;return{...m,...j,...Number((U=x==null?void 0:x.new)==null?void 0:U.id)===Number(j.id)?x==null?void 0:x.new:{},isActiveOriginal:j.isActive}}),Q=(y?await _.getLocalRules(y.map(({id:m})=>Number(m))):[]).reduce((m,j)=>(m[j.id]=j,m),{}),z=y==null?void 0:y.map(m=>{var j,U;return{...m,isActive:((j=Q[m.id])==null?void 0:j.newStatus)??m.isActive,description:((U=Q[m.id])==null?void 0:U.description)??m.description}});X(z)},[D,g,x]);return o.useEffect(()=>{ce()},[D,s,ce]),o.useEffect(()=>{const y=Re().subscribeChanges(N=>h({...N}));return()=>{y.unsubscribe()}},[]),[J,u,{data:f,isFetching:Ae,isLoading:Ee,total:d.current,page:s,isFetched:Le,rowsPerPage:l,isRefetching:Fe}]},cs=()=>{const[a,e]=o.useState(!1);return[o.useCallback(async r=>{e(!0);const n=await _.rulesStatus.toArray(),i=r?n.filter(({id:c})=>r[Number(c)]):n;await q.postNewStatus(i),await _.rulesStatus.clear(),await oe.invalidateQueries({queryKey:["rules"]}),J(1),e(!1)},[]),a]},an=()=>{const[a,e]=o.useState(!1);return[o.useCallback(async()=>{e(!0),await _.rulesStatus.clear(),await oe.invalidateQueries({queryKey:["rules"]}),J(1),e(!1)},[]),a]},ls=o.memo(function({body:e,header:s,footer:r,stickyHeader:n=!0}){return t.jsxs(yt,{sx:{paddingY:4,background:"transparent"},children:[t.jsx(Ze,{sx:{maxHeight:"80vh"},children:t.jsxs(Ye,{stickyHeader:n,children:[t.jsx(Xe,{children:s}),t.jsx(et,{sx:{backgroundColor:({palette:i})=>i.mode===ie.DARK?i.grey[800]:i.grey[300]},children:e}),r&&e&&t.jsx(tt,{children:r})]})}),!e&&t.jsx("div",{children:"asdsadsadsda"})]})}),pe=[{resource:"key",label:"Codigo"},{resource:"name",label:"Regla"},{resource:"newStatus",label:"Estado local"}],us=()=>{const[a]=cs(),[e,s]=o.useState(!1),[r,n]=o.useState([]),i=o.useRef({}),[c,l]=o.useState(!1),u=o.useCallback(()=>{s(!1)},[]),d=o.useCallback(()=>{a(i.current),u()},[a,u]),f=o.useCallback(async()=>{const h=await _.getRulesToUpdate(),g=await q.getConflicts(h);if(n(g),n!=null&&n.length)return s(!0);d()},[d]),X=o.useCallback((h,g)=>{if(g.target.checked)return i.current[h]=!0;delete i.current[h]},[]),x=o.useCallback(h=>{l(h.target.checked)},[]);return t.jsxs(t.Fragment,{children:[t.jsxs(je,{onClick:f,children:[t.jsx(we,{children:t.jsx(le,{fontSize:"small"})}),t.jsx(be,{children:"Sincronizar"})]}),t.jsxs(st,{onClose:u,open:e,children:[t.jsx(nt,{children:"Hay conflictos"}),t.jsxs(at,{children:[t.jsx(ls,{header:t.jsxs(ue,{children:[t.jsx($,{children:t.jsx(de,{checked:c,onChange:x})}),pe.map(({label:h})=>t.jsx($,{children:h},h))]}),body:t.jsx(t.Fragment,{children:r==null?void 0:r.map(h=>t.jsxs(ue,{children:[t.jsx($,{children:t.jsx(de,{disabled:c,onChange:g=>X(h.id,g)})}),pe.map(g=>t.jsx($,{id:`${h.id}-${g.label}`,children:typeof h[g.resource]=="boolean"?h[g.resource]?"Activo":"Inactivo":h[g.resource]}))]},h.id))})}),t.jsx(rt,{children:t.jsx(L,{onClick:d,startIcon:t.jsx(le,{}),children:"Sincronizar"})})]})]})]})},ds=()=>q.getAllLanguages(),hs=()=>{var r;const a=St.useLiveQuery(()=>_.rulesStatus.toArray()),{data:e}=Se({queryKey:["languages"],queryFn:ds}),s=o.useMemo(()=>Pe(e,"id","name"),[e]);return t.jsx(_t,{icon:me(!(a!=null&&a.length),t.jsx(Ue,{}),t.jsx(Ne,{})),textButton:t.jsx(b,{children:me(!!(a!=null&&a.length),"Tienes cambios sin sincronizar","No hay cambios sin sincronizar")}),buttonProps:{variant:"contained"},popoverBody:t.jsx(it,{children:e&&t.jsxs(ot,{children:[(r=a==null?void 0:a.filter(({languageId:n},i,c)=>c.findIndex(({languageId:l})=>l===n)===i))==null?void 0:r.map(({languageId:n},i)=>t.jsx(v,{direction:"row",children:t.jsx(xt,{label:s[n]})},i)),t.jsx(ct,{children:t.jsx(us,{})})]})})})},gs=()=>{const{palette:a}=Ce(),e=o.useContext(Ie),{isLogged:s,user:r}=o.useContext(M),[n,i]=o.useState(null),c=o.useContext(M),l=o.useCallback(()=>e.toggleColorMode(),[e]),u=o.useCallback(({currentTarget:f})=>{i(f)},[]),d=o.useCallback(()=>{i(null)},[]);return t.jsxs(t.Fragment,{children:[t.jsx(lt,{sx:{background:({palette:f})=>`linear-gradient(90deg, ${f.primary.main} 80%, ${f.secondary.main} 100%)`},children:t.jsx(re,{children:t.jsxs(ut,{disableGutters:!0,sx:{justifyContent:"space-between"},children:[t.jsxs(V,{sx:ms,children:[t.jsx(b,{variant:"h6",fontWeight:900,children:"Sonardash"}),t.jsx(b,{variant:"body1",children:"/ Gestión de Reglas"})]}),s&&t.jsx(hs,{}),t.jsxs(v,{direction:"row",justifyContent:"center",alignItems:"center",children:[(a==null?void 0:a.mode)===ie.DARK?t.jsx(Be,{}):t.jsx(qe,{}),t.jsx(dt,{color:"warning",onChange:l}),s&&t.jsx(L,{sx:{borderRadius:"50%"},onClick:u,children:t.jsx(jt,{sx:{width:40,height:40},variant:"circular",children:r==null?void 0:r.email[0]})})]})]})})}),t.jsx(ht,{open:!!n,anchorEl:n,onClose:d,children:t.jsx(gt,{children:t.jsxs(je,{onClick:()=>{c.logOut(),d()},children:[t.jsx(we,{children:t.jsx(Ve,{})}),t.jsx(be,{children:"Log out"})]})})})]})},ms={display:"flex",justifyContent:"center",alignItems:"center",gap:1},ps="/rulesAdmin/admin.svg",fs="_heroImage_1kfgi_1",ys={heroImage:fs},xs=({handleClose:a,handleOpen:e,isOpen:s,content:r})=>{const n=Ce(),i=xe(n.breakpoints.up("md"));return t.jsx(mt,{PaperProps:{sx:{justifyContent:"center"}},onOpen:e,onClose:a,open:s,anchor:i?"right":"bottom",children:t.jsx(re,{sx:js,children:r})})},js={maxWidth:500,width:{md:"50vw"},minHeight:"50vh",display:"grid",placeContent:"center"},ne=({inputProps:a,disabled:e,id:s="password",label:r="Password"})=>{const[n,i]=o.useState(!1),c=o.useCallback(()=>{i(l=>!l)},[]);return t.jsxs(A,{disabled:e,children:[t.jsx(E,{htmlFor:s,children:r}),t.jsx(F,{id:s,type:n?"text":"password",inputProps:a,endAdornment:t.jsx(pt,{position:"end",children:t.jsx(te,{"aria-label":"toggle password visibility",onMouseDown:l=>l.preventDefault(),edge:"end",onClick:c,children:n?t.jsx(Qe,{}):t.jsx(ze,{})})}),label:r})]})};function ws(){const a=o.useContext(M),{enqueueSnackbar:e}=Tt();async function s(r,n){try{await a.login(r,n)}catch(i){const{message:c}=i;return e("Credenciales inválidas",{variant:"error",autoHideDuration:3e3}),c}}return s}function bs({singUpClick:a,isSingUpAvailable:e}){const{handleSubmit:s,register:r,resetField:n}=ke(),i=ws(),[c,l]=o.useState(!1),u=o.useCallback(async({email:d,password:f})=>{l(!0),n("password"),i(d,f),l(!1)},[i,n]);return t.jsxs(v,{component:"form",onSubmit:s(u),spacing:2,p:2,children:[t.jsx(V,{display:"flex",justifyContent:"center",children:t.jsx($e,{sx:{fontSize:"10vh",borderRadius:"50%",border:"2px solid gray"}})}),t.jsxs(A,{disabled:c,children:[t.jsx(E,{htmlFor:"email",children:"Email"}),t.jsx(F,{id:"email",label:"Email",inputProps:r("email")})]}),t.jsx(ne,{disabled:c,inputProps:r("password")}),t.jsx(wt,{type:"submit",variant:"contained",disabled:c,loading:c,children:"Login"}),e&&t.jsxs(b,{align:"center",children:["¿Aún no te registras? ",t.jsx(ee,{onClick:a,children:"Sing up"})," "]})]})}const Cs=({handleLoginClick:a})=>{const[e,s]=o.useState(!1),[r,n]=o.useState(!1),{register:i,handleSubmit:c}=ke(),l=o.useContext(M),u=o.useCallback(async d=>{s(!0),await l.singUp(d),s(!1),n(!0)},[l]);return r?t.jsx(v,{children:t.jsxs(b,{children:["Revisa tu correo y haz click en el enalnce de confirmacion, si ya lo hiciste, ",t.jsx(ee,{onClick:a,children:"Logueate"})]})}):t.jsxs(v,{component:"form",onSubmit:c(u),spacing:2,children:[t.jsxs(A,{disabled:e,children:[t.jsx(E,{htmlFor:"email",children:"Email"}),t.jsx(F,{id:"email",label:"Email",inputProps:i("email")})]}),t.jsx(ne,{inputProps:i("password")}),t.jsx(ne,{id:"confirmPassword",label:"Confirm Password",inputProps:i("confirmPassword")}),t.jsxs(A,{disabled:e,children:[t.jsx(E,{htmlFor:"username",children:"Username"}),t.jsx(F,{id:"username",label:"Username",inputProps:i("username")})]}),t.jsxs(A,{disabled:e,children:[t.jsx(E,{htmlFor:"lastName",children:"Apellido"}),t.jsx(F,{id:"lastName",label:"Apellido",inputProps:i("lastName")})]}),t.jsxs(A,{disabled:e,children:[t.jsx(E,{htmlFor:"firstName",children:"Nombre"}),t.jsx(F,{id:"firstName",label:"Nombre",inputProps:i("firstName")})]}),t.jsx(L,{type:"submit",variant:"contained",children:"Sing up"}),t.jsxs(b,{align:"center",children:["¿Ya tienes cuenta? ",t.jsx(ee,{onClick:a,children:"Log in"})]})]})},Ss=({isSingUpAvailable:a})=>{const[e,s]=o.useState(!1),[r,n]=o.useState(!0),i=o.useCallback((d=!0)=>()=>{s(!0),n(d)},[]),c=o.useCallback(()=>{s(!1)},[]),l=o.useCallback(()=>{n(!1)},[]),u=o.useCallback(()=>{n(!0)},[]);return t.jsxs(t.Fragment,{children:[t.jsxs(v,{direction:"row",height:"80vh",spacing:2,gap:2,alignItems:"center",justifyContent:"center",children:[t.jsx(V,{sx:ks,children:t.jsx("img",{className:ys.heroImage,src:ps,alt:"admin configuring panel"})}),t.jsxs(v,{spacing:1,width:{sm:"100%",md:"50%"},children:[t.jsx(b,{variant:"h3",component:"h1",children:"Ace config and simplify SonarQube rule administration"}),t.jsx(b,{variant:"body1",children:"Effortlessly Customize SonarQube Rules for Optimal Code Quality"}),t.jsxs(v,{spacing:2,direction:{sm:"column",md:"row"},children:[a&&t.jsx(L,{variant:"contained",onClick:i(!1),children:"Sing up"}),t.jsx(L,{variant:"outlined",onClick:i(),children:"Log in"})]})]})]}),t.jsx(xs,{content:r?t.jsx(bs,{singUpClick:l}):t.jsx(Cs,{handleLoginClick:u}),handleClose:c,handleOpen:i,isOpen:e})]})},ks={width:{xs:"0%",md:"50%"},display:{xs:"none",md:"block"}},fe=()=>t.jsx(V,{width:"100%",sx:{display:"grid",placeContent:"center"},children:t.jsx(bt,{animation:"pulse",variant:"rectangular",width:"80vw",height:"50vh"})}),vs=o.lazy(()=>Ke(()=>import("./AdminPanel-e3964bd2.js"),["assets/AdminPanel-e3964bd2.js","assets/@mui/icons-material-c2086071.js","assets/vendor-b612640b.js","assets/@emotion/react-0d101b94.js","assets/@emotion/styled-6b07d811.js","assets/@reactour/tour-e24be7d6.js","assets/@tanstack/react-query-7cfe65c4.js","assets/@react-rxjs/core-1a0bb4f0.js","assets/@react-rxjs/utils-24ca515a.js","assets/@mui/material-99b79a59.js","assets/@mui/lab-cc97fd70.js","assets/use-debounce-6bf2a1da.js","assets/dayjs-c0cd33fe.js","assets/react-draggable-cc2383fd.js","assets/react-hook-form-c6612ec3.js","assets/@supabase/supabase-js-711ba96a.js","assets/dexie-3976de5d.js","assets/dexie-react-hooks-0c2ddb12.js","assets/axios-760d4776.js","assets/notistack-f220509a.js","assets/hotkeys-js-d20e5801.js"]));function Is(){const{isLogged:a,isLoading:e}=o.useContext(M);return t.jsx(Pt,{children:t.jsx(Ft,{app:t.jsxs(t.Fragment,{children:[t.jsx(gs,{}),t.jsxs(re,{sx:{paddingTop:12,minHeight:"100vh"},children:[e&&t.jsx(fe,{}),!a&&!e?t.jsx(Ss,{}):t.jsx(o.Suspense,{fallback:t.jsx(fe,{}),children:t.jsx(vs,{})})]})]})})})}const Ts="pacifico.dev.com",Ps=({children:a})=>{const[e,s]=o.useState(!1),[r,n]=o.useState(!0);o.useEffect(()=>{I.checkAuth().then(c=>{var l;s(!!((l=c==null?void 0:c.user)!=null&&l.id))}).finally(()=>{n(!1)})},[]);const i=o.useMemo(()=>({isLogged:e,isLoading:r,user:I.user,async login(c,l){const u=await I.login(c,l);return s(!0),u},async checkAuth(c,l){return await I.checkAuth(c,l)},async singUp(c){await I.singUp(c)},async logOut(){await I.logOut(),s(!1)}}),[e,r]);return t.jsx(M.Provider,{value:i,children:a})};Ot("ctrl+m",a=>{a.preventDefault(),as(!0)});window.woopra.config({domain:Ts,outgoing_tracking:!0,download_tracking:!0,click_tracking:!0}),window.woopra.track();se.createRoot(document.getElementById("root")).render(t.jsx(Ge.StrictMode,{children:t.jsx(Rt,{steps:[{selector:".language",content:"Selecciona el lenguaje de programación del cual deseas consultar reglas."},{selector:".mainFilters",content:"Ahora procede a seleccionar el perfil a consultar"},{selector:".actualState",content:"Este es el estado actual de la regla en Sonarqube. Las reglas activas son las que analizan los repositorios."},{selector:".proposedState",content:"Aquí podrás proponer si una regla debe estar activada o desactivada, recuerda que tu propuesta no se verá reflejada en SonarQube inmediatamente."},{selector:".dragableMenu",content:t.jsxs(b,{children:["Las opciones de descarga y guardado se encuentran en este botón. Si no lo encuentras rápido, ubícalo con ",t.jsx("kbd",{children:"ctrl"})," +"," ",t.jsx("kbd",{children:"m"}),", ¡también lo puedes mover por toda la pantalla!"]})}],children:t.jsx(Ps,{children:t.jsx(It,{client:oe,children:t.jsx(Is,{})})})})}));export{M as A,ie as C,Gs as D,us as S,en as a,Ys as b,Xs as c,Zs as d,_ as e,q as f,nn as g,ls as h,Re as i,an as j,tn as k,Yt as l,_t as m,sn as n,Ws as p,Js as s,zt as u,Ks as v};
